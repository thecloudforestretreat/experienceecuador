<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mindo | Experience Ecuador</title>

  <!-- Favicons (root paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#034EA2">

  <!-- Global header/footer CSS (required) -->
  <link rel="stylesheet" href="/assets/css/header.css">
  <link rel="stylesheet" href="/assets/css/footer.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand-blue:#034EA2;
      --slate:#6E7B8B;
      --text:#1F1F1F;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#f6f8fb;
      color:var(--text);
    }

    a{text-decoration:none;color:inherit}
    img{max-width:100%;display:block;user-select:none;-webkit-user-drag:none}

    /* ===== CONTENT ONLY ===== */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:40px 18px 56px;
    }

    h1{
      font-family:Montserrat,Inter,sans-serif;
      font-size:clamp(34px,4vw,54px);
      color:var(--brand-blue);
      margin:0 0 10px;
      letter-spacing:-0.03em;
    }

    .lede{
      color:var(--slate);
      line-height:1.65;
      max-width:92ch;
      margin:0;
      font-size:16.8px;
    }

    .meta-row{
      margin-top:14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      color:#162b55;
      font-weight:700;
      font-size:13.5px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(3,78,162,.06);
      border:1px solid rgba(3,78,162,.14);
      color:#0f2f62;
      font-weight:800;
    }

    .content-grid{
      display:grid;
      grid-template-columns:1.15fr 0.85fr;
      gap:22px;
      margin-top:22px;
      align-items:start;
    }

    .card{
      background:#fff;
      padding:22px;
      border-radius:22px;
      box-shadow:0 18px 55px rgba(3,78,162,.12);
      border:1px solid rgba(0,0,0,.06);
    }

    .card + .card{ margin-top:16px; }

    .card h2{
      margin:0 0 10px;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.02em;
      font-size:18px;
      color:#0f2f62;
    }

    .card p{
      margin:0 0 12px;
      color:#1f2b3f;
      line-height:1.75;
      font-size:15.5px;
      max-width:84ch;
    }

    .card p:last-child{ margin-bottom:0; }

    .inline-link{
      text-decoration:underline;
      text-underline-offset:3px;
      font-weight:800;
      color:#162b55;
    }

    .two-col{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
      margin-top:10px;
    }

    .mini-card{
      padding:14px 14px;
      border-radius:18px;
      background:linear-gradient(180deg, rgba(3,78,162,.045), rgba(3,78,162,.02));
      border:1px solid rgba(3,78,162,.12);
    }

    .mini-card h3{
      margin:0 0 6px;
      font-size:14.5px;
      font-weight:900;
      color:#0f2f62;
      letter-spacing:-0.01em;
    }

    .mini-card p{
      margin:0;
      color:#1f2b3f;
      opacity:.92;
      line-height:1.6;
      font-size:14.4px;
    }

    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:10px;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      padding:7px 10px;
      border-radius:999px;
      background:rgba(3,78,162,.06);
      border:1px solid rgba(3,78,162,.14);
      color:#0f2f62;
      font-weight:800;
      font-size:12.8px;
    }

    .side-stack{
      display:flex;
      flex-direction:column;
      gap:16px;
    }

    .mini{
      background:#fff;
      padding:20px;
      border-radius:22px;
      box-shadow:0 18px 55px rgba(3,78,162,.12);
      border:1px solid rgba(0,0,0,.06);
    }

    .mini h3{
      margin:0 0 10px;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.02em;
      font-size:16px;
      color:#0f2f62;
    }

    .mini p{
      margin:0;
      color:var(--slate);
      line-height:1.65;
      font-size:14.8px;
    }

    .link-list{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:12px;
    }

    .pill-link{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 12px;
      border-radius:16px;
      background:rgba(3,78,162,.05);
      border:1px solid rgba(3,78,162,.12);
      font-weight:900;
      color:#0f2f62;
    }

    .pill-link:hover{ background:rgba(3,78,162,.08); }

    .pill-link span{
      opacity:.9;
      font-weight:700;
      color:#162b55;
      font-size:13px;
    }

    /* ===== ITINERARY SELECTOR ===== */
    .it-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-top:10px;
    }

    .it-control{
      display:flex;
      flex-direction:column;
      gap:8px;
      min-width:260px;
      flex:0 0 auto;
    }

    .it-label{
      font-weight:900;
      color:#0f2f62;
      font-size:13px;
      letter-spacing:-0.01em;
      opacity:.95;
    }

    .it-select{
      width:100%;
      appearance:none;
      background:#fff;
      border:1px solid rgba(3,78,162,.18);
      border-radius:14px;
      padding:12px 44px 12px 12px;
      font-weight:800;
      color:#0f2f62;
      box-shadow:0 10px 30px rgba(3,78,162,.08);
      cursor:pointer;
      line-height:1.1;
      background-image:
        linear-gradient(45deg, transparent 50%, rgba(15,47,98,.9) 50%),
        linear-gradient(135deg, rgba(15,47,98,.9) 50%, transparent 50%);
      background-position:
        calc(100% - 18px) 50%,
        calc(100% - 12px) 50%;
      background-size:6px 6px, 6px 6px;
      background-repeat:no-repeat;
    }

    .it-select:focus{
      outline:2px solid rgba(3,78,162,0.35);
      outline-offset:2px;
    }

    .it-summary{
      color:#1f2b3f;
      line-height:1.65;
      font-size:14.8px;
      opacity:.95;
      flex:1 1 320px;
      max-width:70ch;
      margin:0;
    }

    .it-plan{
      margin-top:14px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .day-card{
      border-radius:18px;
      padding:14px 14px;
      background:linear-gradient(180deg, rgba(3,78,162,.045), rgba(3,78,162,.02));
      border:1px solid rgba(3,78,162,.12);
    }

    .day-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }

    .day-title{
      font-weight:900;
      color:#0f2f62;
      letter-spacing:-0.01em;
      font-size:14.8px;
      line-height:1.2;
    }

    .day-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      background:rgba(3,78,162,.06);
      border:1px solid rgba(3,78,162,.14);
      color:#0f2f62;
      font-weight:900;
      font-size:12.5px;
      white-space:nowrap;
    }

    .slots{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .slot{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:10px 10px;
      border-radius:14px;
      background:rgba(255,255,255,.85);
      border:1px solid rgba(3,78,162,.12);
    }

    .slot-time{
      flex:0 0 auto;
      min-width:88px;
      font-weight:900;
      color:#0f2f62;
      font-size:12.8px;
      opacity:.95;
      padding-top:1px;
      white-space:nowrap;
    }

    .slot-text{
      margin:0;
      color:#1f2b3f;
      opacity:.95;
      line-height:1.6;
      font-size:13.8px;
      max-width:78ch;
    }

    .it-note{
      margin-top:12px;
      padding-top:12px;
      border-top:1px solid rgba(0,0,0,.06);
      color:var(--slate);
      font-size:13.8px;
      line-height:1.65;
    }

    /* ===== WEATHER (same as Quito) ===== */
    .wx-card{
      padding:18px 18px;
      border-radius:22px;
      background:#fff;
      box-shadow:0 18px 55px rgba(3,78,162,.12);
      border:1px solid rgba(0,0,0,.06);
    }

    .wx-title{
      margin:0 0 8px;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.02em;
      font-size:16px;
      color:#0f2f62;
    }

    .wx-now{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      padding:14px 14px;
      border-radius:18px;
      background:linear-gradient(180deg, rgba(3,78,162,.045), rgba(3,78,162,.02));
      border:1px solid rgba(3,78,162,.12);
    }

    .wx-date{
      font-weight:900;
      color:#0f2f62;
      letter-spacing:-0.01em;
      font-size:13.2px;
      opacity:.95;
      white-space:nowrap;
      margin-top:2px;
    }

    .wx-lines{
      margin:0;
      color:#1f2b3f;
      line-height:1.55;
      font-size:13.8px;
      opacity:.95;
      text-align:right;
    }

    .wx-grid7{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:10px;
      margin-top:12px;
    }

    .wx-day{
      border-radius:16px;
      padding:10px 10px;
      background:rgba(255,255,255,.9);
      border:1px solid rgba(3,78,162,.14);
      text-align:left;
    }

    .wx-top{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:8px;
    }

    .wx-dow{
      font-weight:900;
      color:#0f2f62;
      font-size:12.5px;
      letter-spacing:-0.01em;
    }

    .wx-mmdd{
      color:#162b55;
      opacity:.75;
      font-size:11.5px;
    }

    .wx-hi{
      margin-top:8px;
      color:#162b55;
      opacity:.8;
      font-size:12.3px;
    }

    .wx-lo{
      color:#162b55;
      opacity:.8;
      font-size:12.3px;
      margin-top:2px;
    }

    .wx-rain{
      margin-top:6px;
      color:#162b55;
      opacity:.85;
      font-size:11.7px;
      white-space:nowrap;
    }

    @media(max-width:980px){
      .wx-grid7{ grid-template-columns:repeat(2, 1fr); }
    }

    .months{
      margin-top:14px;
      padding-top:14px;
      border-top:1px solid rgba(0,0,0,.06);
    }

    .wx-sub{
      margin:0 0 10px;
      color:#1f2b3f;
      opacity:.85;
      font-size:13.5px;
      line-height:1.5;
    }

    .legend{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:10px;
      align-items:center;
    }

    .legend-item{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12.8px;
      font-weight:800;
      color:#162b55;
      opacity:.9;
    }

    .swatch{
      width:14px;
      height:14px;
      border-radius:6px;
      border:1px solid rgba(3,78,162,.22);
      background:rgba(3,78,162,.06);
    }

    .swatch.best{ background:rgba(3,78,162,.14); border-color:rgba(3,78,162,.32); }
    .swatch.good{ background:rgba(3,78,162,.09); border-color:rgba(3,78,162,.22); }
    .swatch.fair{ background:rgba(3,78,162,.04); border-color:rgba(3,78,162,.18); opacity:.85; }

    .month-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:10px;
    }

    .month-chip{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(3,78,162,.14);
      background:rgba(3,78,162,.06);
      color:#0f2f62;
      font-weight:900;
      font-size:12.4px;
      min-width:46px;
    }

    .month-chip.best{
      background:rgba(3,78,162,.14);
      border-color:rgba(3,78,162,.32);
    }

    .month-chip.good{
      background:rgba(3,78,162,.09);
      border-color:rgba(3,78,162,.22);
    }

    .month-chip.fair{
      background:rgba(3,78,162,.04);
      border-color:rgba(3,78,162,.18);
      opacity:.85;
    }

    /* ===== MORE ANDES DESTINATIONS ===== */
    .andes-grid{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      margin-top:12px;
    }

    .andes-tile{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      padding:12px 12px;
      border-radius:16px;
      background:linear-gradient(180deg, rgba(3,78,162,.045), rgba(3,78,162,.02));
      border:1px solid rgba(3,78,162,.12);
      transition:transform .12s ease, background .12s ease;
    }

    .andes-tile:hover{
      background:rgba(3,78,162,.07);
      transform:translateY(-1px);
    }

    .andes-left{
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:0;
    }

    .andes-title{
      font-weight:900;
      color:#0f2f62;
      font-size:14.8px;
      letter-spacing:-0.01em;
      line-height:1.2;
    }

    .andes-sub{
      color:#1f2b3f;
      opacity:.9;
      line-height:1.5;
      font-size:13.4px;
      max-width:60ch;
    }

    .andes-arrow{
      flex:0 0 auto;
      width:34px;
      height:34px;
      border-radius:999px;
      border:1px solid rgba(3,78,162,.18);
      background:rgba(255,255,255,.75);
      display:flex;
      align-items:center;
      justify-content:center;
      margin-top:2px;
    }

    .andes-arrow span{
      display:block;
      width:10px;
      height:10px;
      border-right:2px solid #0f2f62;
      border-bottom:2px solid #0f2f62;
      transform:rotate(-45deg);
      opacity:.85;
    }

    /* ===== CAROUSEL (BOTTOM) ===== */
    .carousel{
      margin-top:18px;
      background:#fff;
      border-radius:22px;
      border:1px solid rgba(0,0,0,0.06);
      box-shadow:0 18px 55px rgba(3,78,162,0.10);
      overflow:hidden;
      position:relative;
      z-index:1;
    }

    .carousel-viewport{
      overflow:hidden;
      width:100%;
      touch-action:pan-y;
    }

    .carousel-track{
      display:flex;
      width:100%;
      transform:translateX(0);
      transition:transform 450ms ease;
      will-change:transform;
    }

    .carousel-slide{
      min-width:100%;
      position:relative;
      aspect-ratio:16/9;
      background:#eef2f7;
    }

    .carousel-slide img{
      width:100%;
      height:100%;
      object-fit:cover;
    }

    .carousel-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:44px;
      height:44px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.35);
      background:rgba(15,47,98,0.55);
      backdrop-filter:blur(10px);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:5;
    }

    .carousel-btn:hover{ background:rgba(15,47,98,0.70); }

    .carousel-btn.prev{ left:12px; }
    .carousel-btn.next{ right:12px; }

    .carousel-btn span{
      display:block;
      width:10px;
      height:10px;
      border-right:2px solid #fff;
      border-bottom:2px solid #fff;
      opacity:.95;
    }

    .carousel-btn.prev span{ transform:rotate(135deg); }
    .carousel-btn.next span{ transform:rotate(-45deg); }

    .carousel-ui{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 14px;
      border-top:1px solid rgba(0,0,0,0.06);
      background:linear-gradient(180deg, rgba(3,78,162,0.03), rgba(3,78,162,0.01));
    }

    .carousel-dots{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }

    .dot{
      width:10px;
      height:10px;
      border-radius:999px;
      border:1px solid rgba(3,78,162,0.25);
      background:rgba(3,78,162,0.12);
      cursor:pointer;
      padding:0;
    }

    .dot.active{
      background:rgba(3,78,162,0.85);
      border-color:rgba(3,78,162,0.85);
    }

    .carousel-counter{
      font-weight:700;
      font-size:13px;
      color:#0f2f62;
      opacity:.9;
      white-space:nowrap;
    }

    /* ===== MOBILE ===== */
    @media(max-width:980px){
      .content-grid{grid-template-columns:1fr}
    }

    @media(max-width:820px){
      .two-col{grid-template-columns:1fr}
    }

    @media(max-width:620px){
      .carousel-slide{ aspect-ratio:16/9; }
      .it-control{ min-width: 100%; }
    }

    @media(max-width:480px){
      .carousel-btn{ width:40px; height:40px; }
      .slot-time{ min-width:82px; }
    }
  </style>
</head>

<body>
  <div id="siteHeader"></div>

  <main>
    <!-- PAGE CONTENT ONLY -->
    <main class="wrap">
      <h1>Mindo</h1>
      <p class="lede">
        Mindo is Ecuador’s cloud forest getaway, known for world-class birding, misty trails, waterfalls, and a calm small-town base.
        It is one of the easiest nature escapes from Quito and a top choice if you want wildlife, fresh air, and lush scenery.
      </p>

      <div class="meta-row" aria-label="Mindo overview metadata">
        <span class="pill">Region: Andes</span>
        <span class="pill">Best For: Cloud Forest, Birding, Waterfalls</span>
        <span class="pill">Good Base For: Quito Day Escape, Chocó Andino Routes</span>
      </div>

      <section class="content-grid" aria-label="Mindo content">
        <!-- LEFT COLUMN -->
        <div>
          <div class="card">
            <h2>What Mindo Is Best For</h2>
            <p>
              Mindo is the kind of place where you slow down and tune in.
              Days are built around short hikes, wildlife moments, and easy excursions to waterfalls and viewpoints.
              Early mornings are prime time for birds and peaceful forest light.
            </p>

            <div class="two-col" aria-label="Mindo highlights">
              <div class="mini-card">
                <h3>Wildlife and Birding</h3>
                <p>
                  One of Ecuador’s best places for hummingbirds and cloud forest species.
                  Great with a guide or on your own near town.
                </p>
              </div>

              <div class="mini-card">
                <h3>Waterfalls and Forest Trails</h3>
                <p>
                  A simple route of lush walks and waterfall stops.
                  Easy to mix short hikes with relaxing breaks.
                </p>
              </div>

              <div class="mini-card">
                <h3>Chocolate and Local Cafés</h3>
                <p>
                  Cozy café culture and small local experiences that pair well with rainy afternoons.
                </p>
              </div>

              <div class="mini-card">
                <h3>Soft Adventure</h3>
                <p>
                  Ziplining, tubing, or canopy viewpoints are available without turning the trip into a full adrenaline schedule.
                </p>
              </div>
            </div>

            <div class="chips" aria-label="Mindo theme chips">
              <span class="chip">Cloud Forest</span>
              <span class="chip">Birding</span>
              <span class="chip">Waterfalls</span>
              <span class="chip">Nature</span>
              <span class="chip">Photography</span>
              <span class="chip">Easy From Quito</span>
            </div>
          </div>

          <div class="card">
            <h2>Quick Planning Notes</h2>
            <p>
              Mindo weather changes quickly. Plan your biggest outdoor activities in the morning, then keep afternoons flexible.
              A great rhythm is: one strong “waterfall day,” one “birding morning,” and one “slow town day” for cafés and short walks.
            </p>
            <p>
              Want a curated 1 to 4 night plan with the right birding spots, guides, and activity pacing?
              Reach out via the <a class="inline-link" href="/contact/">Contact</a> page.
            </p>
          </div>

          <!-- SINGLE ITINERARY SECTION WITH DROPDOWN -->
          <div class="card" id="mindoItinerary">
            <h2>Choose Your Mindo Plan</h2>

            <div class="it-head" aria-label="Itinerary chooser">
              <div class="it-control">
                <div class="it-label">Length of stay</div>
                <select class="it-select" id="itDaysSelect" aria-label="Select number of days">
                  <option value="1">1 day</option>
                  <option value="2">2 days</option>
                  <option value="3">3 days</option>
                  <option value="4">4 days</option>
                </select>
              </div>

              <p class="it-summary" id="itSummary">
                A fast, high-impact day with one strong nature block plus easy town time. Ideal if you are based in Quito.
              </p>
            </div>

            <div class="it-plan" id="itPlan" aria-live="polite" aria-label="Tentative itinerary"></div>

            <div class="it-note">
              This is a tentative pacing guide. Weather in the cloud forest can shift quickly, so we recommend keeping afternoons flexible.
              If you want this tailored to your exact dates and interests, use the <a class="inline-link" href="/contact/">Contact</a> page.
            </div>
          </div>

          <!-- Carousel bottom -->
          <div id="mindoCarousel" class="carousel" aria-label="Mindo image gallery">
            <button class="carousel-btn prev" type="button" aria-label="Previous image">
              <span aria-hidden="true"></span>
            </button>

            <div class="carousel-viewport">
              <div class="carousel-track">
                <div class="carousel-slide"><img src="/assets/images/EE-Carousel-Mindo-1.jpg" alt="Mindo highlight 1"></div>
                <div class="carousel-slide"><img src="/assets/images/EE-Carousel-Mindo-2.jpg" alt="Mindo highlight 2"></div>
                <div class="carousel-slide"><img src="/assets/images/EE-Carousel-Mindo-3.jpg" alt="Mindo highlight 3"></div>
                <div class="carousel-slide"><img src="/assets/images/EE-Carousel-Mindo-4.jpg" alt="Mindo highlight 4"></div>
                <div class="carousel-slide"><img src="/assets/images/EE-Carousel-Mindo-5.jpg" alt="Mindo highlight 5"></div>
                <div class="carousel-slide"><img src="/assets/images/EE-Carousel-Mindo-6.jpg" alt="Mindo highlight 6"></div>
              </div>
            </div>

            <button class="carousel-btn next" type="button" aria-label="Next image">
              <span aria-hidden="true"></span>
            </button>

            <div class="carousel-ui">
              <div class="carousel-dots" aria-label="Carousel pagination"></div>
              <div class="carousel-counter" id="mindoCarouselCounter">1 / 6</div>
            </div>
          </div>
        </div>

        <!-- RIGHT COLUMN -->
        <aside class="side-stack" aria-label="Mindo side content">
          <div class="mini">
            <h3>Good for short stays</h3>
            <p>
              Mindo is one of the easiest cloud forest trips from Quito. If you have limited time, focus on early mornings in the forest,
              then keep afternoons flexible for waterfalls, cafés, and short activities.
            </p>

            <div class="link-list" aria-label="Quick links">
              <a class="pill-link" href="/regions/andes/">
                Back to Andes <span>Region Page</span>
              </a>
              <a class="pill-link" href="/regions/andes/quito/">
                Quito <span>Main Hub</span>
              </a>
              <a class="pill-link" href="/contact/">
                Contact <span>Questions and Partnerships</span>
              </a>
            </div>
          </div>

          <!-- Weather card -->
          <div class="wx-card" aria-label="Weather and seasonality">
            <div class="wx-title">Current Weather</div>

            <div class="wx-now">
              <div class="wx-date" id="mindoWxDate">--/--/----</div>
              <p class="wx-lines" id="mindoWxLines">Loading…</p>
            </div>

            <div class="months" aria-label="Forecast and best months section">
              <div class="wx-title" style="margin-top:0;">7-Day Forecast</div>
              <div class="wx-sub">High / low and rain for the week ahead.</div>
              <div class="wx-grid7" id="mindoWx7" aria-label="Mindo 7-day forecast grid"></div>

              <div class="wx-title" style="margin-top:14px;">Best Months To Visit</div>
              <div class="wx-sub" style="margin-bottom:8px;">
                Based on typically drier skies and comfort for cloud forest exploring.
              </div>

              <div class="legend" aria-label="Best months legend">
                <div class="legend-item"><span class="swatch best" aria-hidden="true"></span>Best</div>
                <div class="legend-item"><span class="swatch good" aria-hidden="true"></span>Good</div>
                <div class="legend-item"><span class="swatch fair" aria-hidden="true"></span>Fair</div>
              </div>

              <div class="month-row" aria-label="12-month seasonality chips">
                <span class="month-chip fair" aria-label="January">Jan</span>
                <span class="month-chip fair" aria-label="February">Feb</span>
                <span class="month-chip fair" aria-label="March">Mar</span>
                <span class="month-chip fair" aria-label="April">Apr</span>
                <span class="month-chip fair" aria-label="May">May</span>
                <span class="month-chip good" aria-label="June good month">Jun</span>
                <span class="month-chip best" aria-label="July best month">Jul</span>
                <span class="month-chip best" aria-label="August best month">Aug</span>
                <span class="month-chip good" aria-label="September good month">Sep</span>
                <span class="month-chip fair" aria-label="October">Oct</span>
                <span class="month-chip fair" aria-label="November">Nov</span>
                <span class="month-chip fair" aria-label="December">Dec</span>
              </div>
            </div>
          </div>

          <div class="mini" aria-label="More Andes destinations card">
            <h3>More Andes Destinations</h3>

            <div class="andes-grid" aria-label="Andes destination links">
              <a class="andes-tile" href="/regions/andes/quito/" aria-label="Open Quito page">
                <div class="andes-left">
                  <div class="andes-title">Quito</div>
                  <div class="andes-sub">Culture, viewpoints, and quick day trips from the capital.</div>
                </div>
                <div class="andes-arrow" aria-hidden="true"><span></span></div>
              </a>

              <a class="andes-tile" href="/regions/andes/otavalo/" aria-label="Open Otavalo page">
                <div class="andes-left">
                  <div class="andes-title">Otavalo</div>
                  <div class="andes-sub">Markets, textiles, lakes, northern highland culture.</div>
                </div>
                <div class="andes-arrow" aria-hidden="true"><span></span></div>
              </a>

              <a class="andes-tile" href="/regions/andes/cotopaxi/" aria-label="Open Cotopaxi page">
                <div class="andes-left">
                  <div class="andes-title">Cotopaxi</div>
                  <div class="andes-sub">Volcano scenery, hikes, and páramo landscapes.</div>
                </div>
                <div class="andes-arrow" aria-hidden="true"><span></span></div>
              </a>

              <a class="andes-tile" href="/regions/andes/banos/" aria-label="Open Baños page">
                <div class="andes-left">
                  <div class="andes-title">Baños</div>
                  <div class="andes-sub">Waterfalls, viewpoints, and soft adventure energy.</div>
                </div>
                <div class="andes-arrow" aria-hidden="true"><span></span></div>
              </a>

              <a class="andes-tile" href="/regions/andes/cuenca/" aria-label="Open Cuenca page">
                <div class="andes-left">
                  <div class="andes-title">Cuenca</div>
                  <div class="andes-sub">Colonial charm, riverside walks, and local craft culture.</div>
                </div>
                <div class="andes-arrow" aria-hidden="true"><span></span></div>
              </a>

              <a class="andes-tile" href="/regions/andes/papallacta/" aria-label="Open Papallacta page">
                <div class="andes-left">
                  <div class="andes-title">Papallacta</div>
                  <div class="andes-sub">Hot springs, páramo views, and relaxing mountain air.</div>
                </div>
                <div class="andes-arrow" aria-hidden="true"><span></span></div>
              </a>

              <a class="andes-tile" href="/regions/andes/choco-andino/" aria-label="Open Chocó Andino page">
                <div class="andes-left">
                  <div class="andes-title">Chocó Andino</div>
                  <div class="andes-sub">Biodiversity, cloud forest landscapes, and nature routes.</div>
                </div>
                <div class="andes-arrow" aria-hidden="true"><span></span></div>
              </a>
            </div>
          </div>
        </aside>
      </section>
    </main>
  </main>

  <div id="siteFooter"></div>

  <!-- Global behavior JS (required, bottom only) -->
  <script src="/assets/js/site.js"></script>

  <!-- Required include injector (exact) -->
  <script>
    (function(){
      async function inject(id, url){
        const el = document.getElementById(id);
        if(!el) return;
        const res = await fetch(url, { cache: "no-store" });
        el.innerHTML = await res.text();
      }
      inject("siteHeader", "/assets/includes/header.html");
      inject("siteFooter", "/assets/includes/footer.html");
    })();
  </script>

  <script>
    // Light deterrent: disable right-click on images only
    document.addEventListener('contextmenu', (e) => {
      if (e.target && e.target.tagName === 'IMG') e.preventDefault();
    });

    /* ===== MINDO ITINERARY (1 page + dropdown) ===== */
    (function(){
      const selectEl = document.getElementById("itDaysSelect");
      const planEl = document.getElementById("itPlan");
      const summaryEl = document.getElementById("itSummary");
      if(!selectEl || !planEl || !summaryEl) return;

      const itineraries = {
        1: {
          summary: "A fast, high-impact day with one strong nature block plus easy town time. Ideal if you are based in Quito.",
          days: [
            {
              title: "Day 1",
              pill: "Highlights + Easy Pacing",
              slots: [
                { time: "Morning", text: "Arrive and start with a short cloud forest nature block. If you are bird-focused, prioritize a hummingbird garden or a guided early walk." },
                { time: "Midday", text: "Lunch in town, then choose a simple activity based on weather: butterfly garden, chocolate experience, or a short viewpoint stop." },
                { time: "Afternoon", text: "Waterfall option if skies cooperate, or keep it flexible with cafés and a relaxed stroll. Return to Quito if you are day-tripping." }
              ]
            }
          ]
        },
        2: {
          summary: "The most efficient short stay. One birding morning, one waterfall-focused day, plus relaxed town time.",
          days: [
            {
              title: "Day 1",
              pill: "Arrive + Town and Nature",
              slots: [
                { time: "Morning", text: "Arrive and settle in. Do a light nature block close to town so you stay flexible." },
                { time: "Midday", text: "Lunch and a calm activity like chocolate, butterfly garden, or a hummingbird garden visit." },
                { time: "Afternoon", text: "Optional short walk or viewpoint. Early night to be ready for an early morning." }
              ]
            },
            {
              title: "Day 2",
              pill: "Waterfalls + Scenic Route",
              slots: [
                { time: "Early", text: "Start early while trails are quieter. Pick a waterfall route day if weather is stable." },
                { time: "Midday", text: "Picnic or lunch stop, then continue with one more waterfall or a shorter forest trail." },
                { time: "Afternoon", text: "Return to town. If you are leaving the same day, keep this block light and buffer time for travel." }
              ]
            }
          ]
        },
        3: {
          summary: "More breathing room. Add a second birding morning or a soft-adventure activity without rushing.",
          days: [
            {
              title: "Day 1",
              pill: "Arrival + Easy Activities",
              slots: [
                { time: "Morning", text: "Arrive, check in, and take a gentle start near town to match weather and energy." },
                { time: "Midday", text: "Chocolate experience or butterfly garden, plus a café stop." },
                { time: "Afternoon", text: "Short trail or viewpoint, then relax. Save the biggest activities for early mornings." }
              ]
            },
            {
              title: "Day 2",
              pill: "Birding Morning",
              slots: [
                { time: "Early", text: "Birding-focused morning. Consider a guide for higher species variety and better timing." },
                { time: "Midday", text: "Lunch and rest. Mindo afternoons can be rainy, so keep this flexible." },
                { time: "Afternoon", text: "Optional soft adventure like ziplining or tubing if conditions are good." }
              ]
            },
            {
              title: "Day 3",
              pill: "Waterfalls + Relaxed Finish",
              slots: [
                { time: "Morning", text: "Waterfall route day, or swap with another birding morning depending on your priorities." },
                { time: "Midday", text: "Lunch and a final scenic stop." },
                { time: "Afternoon", text: "Slow town time and travel onward with buffer time." }
              ]
            }
          ]
        },
        4: {
          summary: "The full slow trip. Multiple mornings in the forest, waterfalls, and relaxed afternoons in town.",
          days: [
            {
              title: "Day 1",
              pill: "Arrive + Settle In",
              slots: [
                { time: "Morning", text: "Arrive and keep it easy. Short nature activity close to town." },
                { time: "Midday", text: "Chocolate, butterfly garden, or hummingbird garden, then lunch." },
                { time: "Afternoon", text: "Relaxed town time. Save major hiking for mornings." }
              ]
            },
            {
              title: "Day 2",
              pill: "Birding Morning",
              slots: [
                { time: "Early", text: "Primary birding morning. Guided if you want the best variety and pacing." },
                { time: "Midday", text: "Rest and café time. Flexible weather buffer." },
                { time: "Afternoon", text: "Optional soft adventure or a short trail depending on conditions." }
              ]
            },
            {
              title: "Day 3",
              pill: "Waterfalls Day",
              slots: [
                { time: "Early", text: "Waterfalls route with the best chance of clear trails early." },
                { time: "Midday", text: "Lunch stop and one additional short trail if energy is good." },
                { time: "Afternoon", text: "Back to town for a relaxed evening." }
              ]
            },
            {
              title: "Day 4",
              pill: "Choose Your Favorite Repeat",
              slots: [
                { time: "Morning", text: "Pick your favorite repeat: another birding morning or a second, lighter waterfall set." },
                { time: "Midday", text: "Final lunch, souvenir browsing, and slow town moments." },
                { time: "Afternoon", text: "Depart with buffer time for travel." }
              ]
            }
          ]
        }
      };

      function getDaysFromUrl(){
        try{
          const u = new URL(window.location.href);
          const v = u.searchParams.get("days");
          const n = Number(v);
          if([1,2,3,4].includes(n)) return n;
        }catch(_){}
        return null;
      }

      function setDaysInUrl(days){
        try{
          const u = new URL(window.location.href);
          u.searchParams.set("days", String(days));
          window.history.replaceState({}, "", u.toString());
        }catch(_){}
      }

      function render(days){
        const data = itineraries[days] || itineraries[2];
        summaryEl.textContent = data.summary;

        planEl.innerHTML = data.days.map((d) => {
          const slotsHtml = d.slots.map(s => {
            return `
              <div class="slot">
                <div class="slot-time">${s.time}</div>
                <p class="slot-text">${s.text}</p>
              </div>
            `;
          }).join("");

          return `
            <div class="day-card" aria-label="${d.title}">
              <div class="day-top">
                <div class="day-title">${d.title}</div>
                <div class="day-pill">${d.pill}</div>
              </div>
              <div class="slots">
                ${slotsHtml}
              </div>
            </div>
          `;
        }).join("");
      }

      const initial = getDaysFromUrl() || 2;
      selectEl.value = String(initial);
      render(initial);

      selectEl.addEventListener("change", () => {
        const v = Number(selectEl.value);
        const safe = [1,2,3,4].includes(v) ? v : 2;
        render(safe);
        setDaysInUrl(safe);
      });
    })();

    /* Mindo weather: date + (max/min/rain) + 7-day forecast */
    (function(){
      const dateEl = document.getElementById("mindoWxDate");
      const linesEl = document.getElementById("mindoWxLines");
      const grid7 = document.getElementById("mindoWx7");
      if(!dateEl || !linesEl || !grid7) return;

      const PLACE = { name:"Mindo", lat:-0.0516, lon:-78.7764 };
      const CACHE_KEY = "ee_mindo_weather_v3";
      const CACHE_TTL_MS = 10 * 60 * 1000;

      function cToF(c){ return (c * 9/5) + 32; }
      function fmtTemp(c){
        const cc = Math.round(c * 10) / 10;
        const ff = Math.round(cToF(cc) * 10) / 10;
        return `${cc}°C / ${ff}°F`;
      }

      function fmtDow(dateStr){
        const d = new Date(dateStr + "T00:00:00");
        return d.toLocaleDateString(undefined, { weekday:"short" });
      }

      function fmtMd(dateStr){
        const d = new Date(dateStr + "T00:00:00");
        return d.toLocaleDateString(undefined, { month:"short", day:"numeric" });
      }

      function fmtMMDDYYYY(dateStr){
        const d = new Date(dateStr + "T00:00:00");
        const mm = String(d.getMonth() + 1).padStart(2, "0");
        const dd = String(d.getDate()).padStart(2, "0");
        const yy = d.getFullYear();
        return `${mm}/${dd}/${yy}`;
      }

      function readCache(){
        try{
          const raw = localStorage.getItem(CACHE_KEY);
          if(!raw) return null;
          const obj = JSON.parse(raw);
          if(!obj || !obj.ts || !obj.data) return null;
          if(Date.now() - obj.ts > CACHE_TTL_MS) return null;
          return obj.data;
        }catch(_){ return null; }
      }

      function writeCache(data){
        try{ localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data })); }catch(_){}
      }

      function render(d){
        const daily = d && d.daily ? d.daily : null;

        const t0 = daily && Array.isArray(daily.time) ? daily.time[0] : null;
        const todayMax = daily && daily.temperature_2m_max && typeof daily.temperature_2m_max[0] === "number" ? daily.temperature_2m_max[0] : null;
        const todayMin = daily && daily.temperature_2m_min && typeof daily.temperature_2m_min[0] === "number" ? daily.temperature_2m_min[0] : null;
        const todayRain = daily && daily.precipitation_sum && typeof daily.precipitation_sum[0] === "number" ? daily.precipitation_sum[0] : null;

        dateEl.textContent = t0 ? fmtMMDDYYYY(t0) : "--/--/----";

        const lines = [];
        if(todayMax !== null) lines.push(`Max: ${fmtTemp(todayMax)}`);
        if(todayMin !== null) lines.push(`Min: ${fmtTemp(todayMin)}`);
        if(todayRain !== null) lines.push(`Rain: ${Math.round(todayRain * 10)/10} mm`);
        linesEl.innerHTML = lines.length ? lines.join("<br>") : "Weather data unavailable right now.";

        const times = daily && Array.isArray(daily.time) ? daily.time : [];
        const maxArr = daily && Array.isArray(daily.temperature_2m_max) ? daily.temperature_2m_max : [];
        const minArr = daily && Array.isArray(daily.temperature_2m_min) ? daily.temperature_2m_min : [];
        const rainArr = daily && Array.isArray(daily.precipitation_sum) ? daily.precipitation_sum : [];

        const days = [];
        for(let i=0; i<7; i++){
          if(!times[i]) break;
          days.push({
            time: times[i],
            max: typeof maxArr[i] === "number" ? maxArr[i] : null,
            min: typeof minArr[i] === "number" ? minArr[i] : null,
            rain: typeof rainArr[i] === "number" ? rainArr[i] : null
          });
        }

        grid7.innerHTML = days.map((day) => {
          const hi = day.max !== null ? fmtTemp(day.max) : "--";
          const lo = day.min !== null ? fmtTemp(day.min) : "--";
          const rain = day.rain !== null ? (Math.round(day.rain * 10)/10 + " mm") : "--";
          return `
            <div class="wx-day" aria-label="Forecast ${day.time}">
              <div class="wx-top">
                <div class="wx-dow">${fmtDow(day.time)}</div>
                <div class="wx-mmdd">${fmtMd(day.time)}</div>
              </div>
              <div class="wx-hi">${hi}</div>
              <div class="wx-lo">${lo}</div>
              <div class="wx-rain">☔ ${rain}</div>
            </div>
          `;
        }).join("");
      }

      async function load(){
        const cached = readCache();
        if(cached){
          render(cached);
          return;
        }

        try{
          const url = `/api/weather?lat=${encodeURIComponent(PLACE.lat)}&lon=${encodeURIComponent(PLACE.lon)}`;
          const res = await fetch(url, { headers: { "accept": "application/json" } });
          const json = await res.json();
          const d = json && json.data ? json.data : null;

          if(!d || d.error){
            linesEl.textContent = "Weather unavailable right now.";
            return;
          }

          writeCache(d);
          render(d);
        }catch(_){
          linesEl.textContent = "Weather unavailable right now.";
        }
      }

      load();
    })();

    /* Mindo carousel */
    (function(){
      const root = document.getElementById("mindoCarousel");
      if(!root) return;

      const track = root.querySelector(".carousel-track");
      const slides = Array.from(root.querySelectorAll(".carousel-slide"));
      const prevBtn = root.querySelector(".carousel-btn.prev");
      const nextBtn = root.querySelector(".carousel-btn.next");
      const dotsWrap = root.querySelector(".carousel-dots");
      const counter = root.querySelector("#mindoCarouselCounter");

      let index = 0;

      const AUTOPLAY_MS = 5000;
      const prefersReducedMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      let autoplayTimer = null;
      let autoplayEnabled = !prefersReducedMotion;

      function setIndex(next){
        index = (next + slides.length) % slides.length;
        track.style.transform = `translateX(-${index * 100}%)`;
        updateDots();
        updateCounter();
      }

      function updateCounter(){
        if(counter) counter.textContent = `${index + 1} / ${slides.length}`;
      }

      function updateDots(){
        const dots = Array.from(dotsWrap.querySelectorAll(".dot"));
        dots.forEach((d,i) => d.classList.toggle("active", i === index));
      }

      function buildDots(){
        dotsWrap.innerHTML = "";
        slides.forEach((_, i) => {
          const b = document.createElement("button");
          b.type = "button";
          b.className = "dot" + (i === 0 ? " active" : "");
          b.setAttribute("aria-label", `Go to image ${i + 1}`);
          b.addEventListener("click", () => {
            setIndex(i);
            stopAutoplay();
          });
          dotsWrap.appendChild(b);
        });
      }

      function next(){ setIndex(index + 1); }
      function prev(){ setIndex(index - 1); }

      function startAutoplay(){
        if(!autoplayEnabled) return;
        stopAutoplay();
        autoplayTimer = setInterval(next, AUTOPLAY_MS);
      }

      function stopAutoplay(){
        if(autoplayTimer){
          clearInterval(autoplayTimer);
          autoplayTimer = null;
        }
      }

      if(prevBtn) prevBtn.addEventListener("click", () => { prev(); stopAutoplay(); });
      if(nextBtn) nextBtn.addEventListener("click", () => { next(); stopAutoplay(); });

      root.addEventListener("keydown", (e) => {
        if(e.key === "ArrowLeft"){ prev(); stopAutoplay(); }
        if(e.key === "ArrowRight"){ next(); stopAutoplay(); }
      });

      let startX = 0;
      let isDown = false;

      const viewport = root.querySelector(".carousel-viewport");
      viewport.addEventListener("pointerdown", (e) => {
        isDown = true;
        startX = e.clientX;
        viewport.setPointerCapture(e.pointerId);
      });

      viewport.addEventListener("pointerup", (e) => {
        if(!isDown) return;
        isDown = false;
        const dx = e.clientX - startX;
        const threshold = 40;
        if(dx > threshold){ prev(); stopAutoplay(); }
        if(dx < -threshold){ next(); stopAutoplay(); }
      });

      viewport.addEventListener("pointercancel", () => { isDown = false; });

      root.addEventListener("mouseenter", stopAutoplay);
      root.addEventListener("mouseleave", startAutoplay);
      root.addEventListener("focusin", stopAutoplay);
      root.addEventListener("focusout", startAutoplay);

      root.tabIndex = 0;
      buildDots();
      updateCounter();
      setIndex(0);
      startAutoplay();
    })();
  </script>
</body>
</html>
