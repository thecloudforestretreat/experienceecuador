<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Partner Application | Experience Ecuador</title>
  <meta name="description" content="Apply to be featured as a recommended partner on Experience Ecuador. Submit your business details, regions, locations, and experiences." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://experienceecuador.com/partners/join/" />

  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Experience Ecuador" />
  <meta property="og:title" content="Partner Application | Experience Ecuador" />
  <meta property="og:description" content="Submit your partner application to be considered for Recommended by Experience Ecuador." />
  <meta property="og:url" content="https://experienceecuador.com/partners/join/" />
  <meta property="og:image" content="https://experienceecuador.com/assets/images/EE-OG-Image-1.jpg" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Partner Application | Experience Ecuador" />
  <meta name="twitter:description" content="Apply to be featured as a recommended partner on Experience Ecuador." />
  <meta name="twitter:image" content="https://experienceecuador.com/assets/images/EE-OG-Image-1.jpg" />

  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#034EA2" />

  <link rel="stylesheet" href="/assets/css/header.css" />
  <link rel="stylesheet" href="/assets/css/footer.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <style>
    :root{
      --brand:#034EA2;
      --ink:#0f2f62;
      --text:#1f2a3a;
      --muted:#6b7280;
      --bg:#f6f8fb;
      --card:#ffffff;
      --line: rgba(0,0,0,0.08);
      --shadow: 0 18px 55px rgba(3,78,162,0.12);
      --shadowSoft: 0 14px 34px rgba(3,78,162,0.10);
      --r-xl: 24px;
      --r-lg: 18px;
      --r-md: 14px;
      --max: 1040px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: var(--bg);
    }
    a{ color: inherit; text-decoration:none; }
    .wrap{ max-width: var(--max); margin:0 auto; padding: 22px 18px 72px; }

    .topRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin: 10px 0 16px;
    }
    h1{
      margin:0;
      font-family: Montserrat, Inter, sans-serif;
      font-weight: 800;
      letter-spacing: -0.03em;
      color: var(--brand);
      font-size: 30px;
      line-height: 1.1;
    }
    .sub{
      margin: 8px 0 0;
      color: var(--muted);
      line-height: 1.6;
      font-weight: 600;
      max-width: 86ch;
      font-size: 14px;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r-xl);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .pad{ padding: 16px; }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }
    .row.one{ grid-template-columns: 1fr; }

    label{
      display:block;
      font-weight: 900;
      font-size: 12.5px;
      color: var(--ink);
      margin: 0 0 6px;
    }
    .req{ color:#b91c1c; margin-right:6px; }
    input, textarea, select{
      width:100%;
      border:1px solid rgba(3,78,162,0.18);
      border-radius: 14px;
      padding: 11px 12px;
      font-size: 14px;
      outline: none;
      background: rgba(255,255,255,0.98);
    }
    textarea{ min-height: 96px; resize: vertical; }

    .help{
      font-size: 12px;
      color: var(--muted);
      font-weight: 650;
      margin-top: 6px;
      line-height: 1.5;
    }

    .pillBox{
      border:1px solid rgba(3,78,162,0.18);
      border-radius: 14px;
      padding: 10px;
      background: rgba(3,78,162,0.03);
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid rgba(3,78,162,0.18);
      background: rgba(255,255,255,0.92);
      font-weight: 900;
      font-size: 12.5px;
      color: var(--ink);
      cursor: pointer;
      user-select:none;
      white-space: nowrap;
    }
    .pill input{ width:auto; margin:0; }

    .uploadBand{
      border-radius: 16px;
      border: 1px solid rgba(3,78,162,0.18);
      background: rgba(3,78,162,0.04);
      padding: 12px;
      margin-top: 10px;
    }
    .uploadBand strong{ color: var(--ink); }
    .uploadRow{ display:flex; gap: 10px; flex-wrap: wrap; align-items:center; margin-top: 8px; }
    .btnLink{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 900;
      border: 1px solid rgba(3,78,162,0.18);
      background: rgba(255,255,255,0.96);
      color: var(--ink);
      box-shadow: var(--shadowSoft);
    }

    .consentRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      padding: 12px;
      border-radius: 14px;
      border:1px solid rgba(3,78,162,0.18);
      background: rgba(255,255,255,0.92);
    }
    .consentRow label{ margin:0; font-size:12.8px; line-height:1.5; font-weight:900; color: var(--ink); }
    .consentRow input{ width:auto; margin-top: 2px; }

    .okBox, .errBox{
      margin-top: 14px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,0.08);
      background: rgba(255,255,255,0.92);
      font-weight: 800;
      display:none;
      line-height: 1.55;
      font-size: 13px;
    }
    .okBox{ border-color: rgba(16,185,129,0.35); }
    .errBox{ border-color: rgba(239,68,68,0.35); }

    .actions{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex-wrap: wrap;
      padding: 16px;
      border-top: 1px solid var(--line);
      background: rgba(3,78,162,0.02);
    }
    .note{ font-weight: 800; color: var(--ink); font-size: 12.5px; line-height: 1.45; max-width: 66ch; }
    .btnRow{ display:flex; gap: 10px; flex-wrap: wrap; align-items:center; }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 900;
      border: 1px solid rgba(3,78,162,0.18);
      background: rgba(255,255,255,0.96);
      color: var(--ink);
      cursor:pointer;
      box-shadow: var(--shadowSoft);
    }
    .btn.primary{
      background: rgba(3,78,162,0.95);
      color:#fff;
      border-color: rgba(3,78,162,0.28);
      box-shadow: 0 18px 40px rgba(3,78,162,0.18);
    }
    .btn:disabled{ opacity:.65; cursor: default; }
    .btn .spinner{
      width: 16px; height: 16px; border-radius: 999px;
      border: 2px solid rgba(255,255,255,0.45);
      border-top-color: rgba(255,255,255,0.95);
      display:none;
      animation: spin 800ms linear infinite;
    }
    .btn.primary.busy .spinner{ display:inline-block; }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    @media (max-width: 900px){
      .wrap{ padding: 18px 14px 64px; }
      .row{ grid-template-columns: 1fr; }
      .note{ max-width:none; }
    }
  </style>
</head>
<body>
  <div id="siteHeader"></div>

  <main class="wrap" aria-label="Partner application">
    <div class="topRow">
      <div>
        <h1>Partner Application</h1>
        <p class="sub">
          Submit your details to be considered for Recommended by Experience Ecuador.
          Fields marked with <span class="req">*</span> are required.
        </p>
      </div>
    </div>

    <section class="card" aria-label="Partner form">
      <div class="pad">
        <div class="row">
          <div>
            <label><span class="req">*</span>Business name</label>
            <input id="business_name" placeholder="Mindo Bird Watching" />
            <div class="help">Auto-capitalizes as you type.</div>
          </div>
          <div>
            <label><span class="req">*</span>Category</label>
            <select id="business_type"></select>
            <div class="help">Choose one.</div>
          </div>
        </div>

        <div class="row">
          <div>
            <label><span class="req">*</span>Contact first name</label>
            <input id="contact_first_name" placeholder="Maria" />
          </div>
          <div>
            <label><span class="req">*</span>Contact last name</label>
            <input id="contact_last_name" placeholder="Perez" />
          </div>
        </div>

        <div class="row">
          <div>
            <label><span class="req">*</span>Contact email</label>
            <input id="contact_email" type="email" placeholder="hello@example.com" />
          </div>
          <div>
            <label>Contact phone (optional)</label>
            <input id="contact_phone" placeholder="+593 ..." />
          </div>
        </div>

        <div class="row">
          <div>
            <label><span class="req">*</span>Website URL</label>
            <input id="website_url" placeholder="https://example.com" />
          </div>
          <div>
            <label>WhatsApp URL (optional)</label>
            <input id="whatsapp_url" placeholder="https://wa.me/..." />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Photos (optional)</label>

            <div class="uploadBand">
              <div><strong>Option A: Upload images</strong></div>
              <div class="help">
                If you have a Google account, you can upload images using our upload form. Google requires sign-in for file uploads.
              </div>
              <div class="uploadRow">
                <a class="btnLink" href="https://docs.google.com/forms/d/e/1FAIpQLSf4bTVL36AFYwK1WUyPZbYvkJ891VYnYQrh1VaibIsMCKwEbA/viewform?usp=sharing" target="_blank" rel="noopener">Open upload form</a>
              </div>
            </div>

            <div style="margin-top:10px">
              <div class="help">
                Option B: If you already have direct image URLs, you can paste them here.
              </div>
              <input id="image_1_url" placeholder="Image URL 1" style="margin-top:8px" />
              <input id="image_2_url" placeholder="Image URL 2" style="margin-top:10px" />
              <input id="image_3_url" placeholder="Image URL 3" style="margin-top:10px" />
            </div>

            <div class="help">
              Option C: If neither works, you can email images to info@experienceecuador.com.
            </div>
          </div>

          <div>
            <label><span class="req">*</span>Regions</label>
            <div class="pillBox" id="regionsBox"></div>
            <div class="help">Select all that apply.</div>

            <div style="margin-top:12px">
              <label><span class="req">*</span>Locations</label>
              <div class="pillBox" id="locationsBox"></div>
              <div class="help">Locations update based on selected regions.</div>
            </div>
          </div>
        </div>

        <div class="row one">
          <div>
            <label><span class="req">*</span>Experiences</label>
            <div class="pillBox" id="experiencesBox"></div>
            <div class="help">Select all that apply.</div>
          </div>
        </div>

        <div class="row one">
          <div>
            <label><span class="req">*</span>Short description (Spanish)</label>
            <textarea id="short_description_es" placeholder="Describe tu negocio en 2 a 5 frases."></textarea>
            <div class="help">This can be Spanish only for now. English is optional.</div>
          </div>
        </div>

        <div class="row one">
          <div>
            <label>Short description (English, optional)</label>
            <textarea id="short_description_en" placeholder="Describe your business in 2 to 5 sentences."></textarea>
          </div>
        </div>

        <div class="row one" style="margin-top:14px">
          <div class="consentRow">
            <label><span class="req">*</span>I confirm you may publish these details on Experience Ecuador.</label>
            <input id="consent_publish" type="checkbox" />
          </div>

          <div class="consentRow" style="margin-top:10px">
            <label><span class="req">*</span>I agree Experience Ecuador may contact me about my submission.</label>
            <input id="consent_contact" type="checkbox" />
          </div>
        </div>

        <div class="okBox" id="okBox"></div>
        <div class="errBox" id="errBox"></div>
      </div>

      <div class="actions">
        <div class="note">Submissions are reviewed before publishing. No public prices are displayed.</div>
        <div class="btnRow">
          <button class="btn" id="btnReset" type="button">Reset</button>
          <button class="btn primary" id="btnSubmit" type="button">
            <span id="btnSubmitLabel">Submit</span>
            <span class="spinner" aria-hidden="true"></span>
          </button>
        </div>
      </div>
    </section>
  </main>

  <div id="siteFooter"></div>

  <script src="/assets/js/site.js"></script>
  <script>
    (function(){
      async function inject(id, url){
        var el = document.getElementById(id);
        if(!el) return;
        var res = await fetch(url, { cache: "no-store" });
        el.innerHTML = await res.text();
      }
      inject("siteHeader", "/assets/includes/header.html");
      inject("siteFooter", "/assets/includes/footer.html");
    })();
  </script>

  <script>
    (function(){
      var API_URL = "https://script.google.com/macros/s/AKfycbyRKvcA3pKXEwA6rJS6TIqiG9AGzhNFaAX_MTKKZ12nf_XyrpCc-O5S5nOGfo2C1QEcTw/exec";
      var UPLOAD_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSf4bTVL36AFYwK1WUyPZbYvkJ891VYnYQrh1VaibIsMCKwEbA/viewform?usp=sharing";

      function qs(sel, root){ return (root||document).querySelector(sel); }
      function qsa(sel, root){ return Array.prototype.slice.call((root||document).querySelectorAll(sel)); }

      function esc(s){
        return String(s||"").replace(/[&<>"']/g, function(m){
          return ({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"})[m];
        });
      }

      function titleCaseWords(s){
        var t = String(s || "").replace(/\s+/g, " ").trim();
        if(!t) return "";
        return t.split(" ").map(function(w){
          if(!w) return "";
          return w.charAt(0).toUpperCase() + w.slice(1).toLowerCase();
        }).join(" ");
      }

      function showOk(msg){
        var ok = qs("#okBox");
        var err = qs("#errBox");
        err.style.display = "none";
        ok.style.display = "block";
        ok.textContent = msg;
      }

      function showErr(msg){
        var ok = qs("#okBox");
        var err = qs("#errBox");
        ok.style.display = "none";
        err.style.display = "block";
        err.textContent = msg;
      }

      function clearMsgs(){
        qs("#okBox").style.display = "none";
        qs("#errBox").style.display = "none";
      }

      function getChecked(name){
        return qsa('input[type="checkbox"][name="'+name+'"]:checked').map(function(x){ return (x.value||"").trim(); }).filter(Boolean);
      }

      function pill(id, label, group, value, checked){
        var safeId = group + "_" + id;
        return '<label class="pill" for="'+safeId+'">' +
          '<input id="'+safeId+'" type="checkbox" name="'+group+'" value="'+esc(value)+'"'+(checked ? " checked" : "")+'>' +
          '<span>'+esc(label)+'</span></label>';
      }

      function renderBusinessTypes(){
        var sel = qs("#business_type");
        var current = sel.value || "";
        var opts = [
          '<option value="">Select</option>',
          '<option value="lodging">Lodging</option>',
          '<option value="restaurants">Restaurants</option>',
          '<option value="services">Services</option>',
          '<option value="activities">Activities</option>'
        ];
        sel.innerHTML = opts.join("");
        if(current) sel.value = current;
      }

      function normalizeRegionsJson(payload){
        if(payload && payload.regions && Array.isArray(payload.regions)) return payload.regions;
        if(payload && Array.isArray(payload)) return payload;
        return [];
      }

      function normalizeExperiencesJson(payload){
        if(payload && payload.experiences && Array.isArray(payload.experiences)) return payload.experiences;
        if(payload && Array.isArray(payload)) return payload;
        return [];
      }

      function loadData(){
        return Promise.all([
          fetch("/assets/data/regions.json", { cache:"no-store" }).then(function(r){ return r.json(); }),
          fetch("/assets/data/experiences.json", { cache:"no-store" }).then(function(r){ return r.json(); })
        ]);
      }

      var REGIONS = [];
      var EXPERIENCES = [];

      function renderRegions(preserve){
        var prev = preserve ? getChecked("regions") : [];
        var box = qs("#regionsBox");
        box.innerHTML = REGIONS.map(function(r){
          var label = r.name_en || r.name || r.id;
          return pill(r.id, label, "regions", r.id, prev.indexOf(r.id) !== -1);
        }).join("");
      }

      function renderLocations(preserve){
        var selected = getChecked("regions");
        var prev = preserve ? getChecked("locations") : [];
        var box = qs("#locationsBox");
        if(!selected.length){ box.innerHTML = ""; return; }

        var locs = [];
        REGIONS.forEach(function(r){
          if(selected.indexOf(r.id) === -1) return;
          (r.locations || []).forEach(function(l){
            var label = l.name_en || l.name || l.id;
            locs.push({ id: l.id, label: label });
          });
        });

        var seen = {};
        var uniq = [];
        locs.forEach(function(l){ if(l.id && !seen[l.id]){ seen[l.id]=true; uniq.push(l); } });
        uniq.sort(function(a,b){ return String(a.label).localeCompare(String(b.label), "en", { sensitivity:"base" }); });

        box.innerHTML = uniq.map(function(l){ return pill(l.id, l.label, "locations", l.id, prev.indexOf(l.id) !== -1); }).join("");
      }

      function renderExperiences(preserve){
        var prev = preserve ? getChecked("experiences") : [];
        var box = qs("#experiencesBox");

        var items = EXPERIENCES.map(function(e){
          var label = e.name_en || e.name || e.id;
          return { id: e.id, label: label };
        });
        items.sort(function(a,b){ return String(a.label).localeCompare(String(b.label), "en", { sensitivity:"base" }); });

        box.innerHTML = items.map(function(e){ return pill(e.id, e.label, "experiences", e.id, prev.indexOf(e.id) !== -1); }).join("");
      }

      function validate(){
        function v(id){ return (qs(id).value || "").trim(); }
        var business_name = v("#business_name");
        var cf = v("#contact_first_name");
        var cl = v("#contact_last_name");
        var ce = v("#contact_email");
        var bt = (qs("#business_type").value || "").trim();
        var web = v("#website_url");
        var regions = getChecked("regions");
        var locations = getChecked("locations");
        var experiences = getChecked("experiences");
        var descEs = v("#short_description_es");
        var c1 = qs("#consent_publish").checked;
        var c2 = qs("#consent_contact").checked;

        if(!business_name || !cf || !cl || !ce || !bt || !web) return false;
        if(!regions.length || !locations.length || !experiences.length) return false;
        if(!descEs) return false;
        if(!c1 || !c2) return false;
        return true;
      }

      function buildPayload(){
        function v(id){ return (qs(id).value || "").trim(); }
        var payload = {
          language: "en",
          business_name: v("#business_name"),
          business_type: (qs("#business_type").value || "").trim(),
          contact_first_name: v("#contact_first_name"),
          contact_last_name: v("#contact_last_name"),
          contact_email: v("#contact_email"),
          contact_phone: v("#contact_phone"),
          website_url: v("#website_url"),
          whatsapp_url: v("#whatsapp_url"),
          regions: getChecked("regions"),
          locations: getChecked("locations"),
          experiences: getChecked("experiences"),
          short_description_es: v("#short_description_es"),
          short_description_en: v("#short_description_en"),
          image_1_url: v("#image_1_url"),
          image_2_url: v("#image_2_url"),
          image_3_url: v("#image_3_url"),
          drive_upload_link: UPLOAD_FORM_URL,
          consent_publish: qs("#consent_publish").checked ? "yes" : "no",
          consent_contact: qs("#consent_contact").checked ? "yes" : "no",
          source_page: window.location.href
        };
        return payload;
      }

      async function submit(){
        clearMsgs();
        if(!validate()){ showErr("Please complete all required fields marked with *."); return; }

        var btn = qs("#btnSubmit");
        btn.disabled = true;
        btn.classList.add("busy");
        qs("#btnSubmitLabel").textContent = "Submitting";

        try{
          var res = await fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(buildPayload())
          });

          var ct = (res.headers.get("content-type") || "").toLowerCase();
          var data = null;

          if(ct.indexOf("application/json") !== -1){
            data = await res.json();
          } else {
            var txt = await res.text();
            throw new Error("Server did not return JSON. Response starts with: " + txt.slice(0, 60));
          }

          if(!data || !data.ok) throw new Error((data && (data.error || data.email_error)) ? (data.error || data.email_error) : "Submission failed.");

          showOk("Submitted. Thank you. We will follow up by email if we need anything else.");
          qs("#btnReset").click();
        } catch(e) {
          showErr(String(e && e.message ? e.message : e));
        } finally {
          btn.disabled = false;
          btn.classList.remove("busy");
          qs("#btnSubmitLabel").textContent = "Submit";
        }
      }

      function reset(){
        qs("#business_type").value = "";
        qsa('input[type="checkbox"][name="regions"]').forEach(function(x){ x.checked = false; });
        qsa('input[type="checkbox"][name="locations"]').forEach(function(x){ x.checked = false; });
        qsa('input[type="checkbox"][name="experiences"]').forEach(function(x){ x.checked = false; });
        qs("#locationsBox").innerHTML = "";
        qs("#consent_publish").checked = false;
        qs("#consent_contact").checked = false;
        clearMsgs();
        qs("#business_name").focus();
      }

      function boot(){
        // business name title case
        qs("#business_name").addEventListener("input", function(){
          var caret = this.selectionStart;
          var next = titleCaseWords(this.value);
          this.value = next;
          try{ this.setSelectionRange(caret, caret); }catch(_){}
        });

        renderBusinessTypes();

        // load regions/experiences from site json
        loadData().then(function(parts){
          var regionsPayload = parts[0];
          var expPayload = parts[1];

          REGIONS = normalizeRegionsJson(regionsPayload);
          EXPERIENCES = normalizeExperiencesJson(expPayload);

          renderRegions(false);
          renderExperiences(false);
          renderLocations(false);
        }).catch(function(err){
          showErr("Failed to load regions/experiences. " + String(err && err.message ? err.message : err));
        });

        document.addEventListener("change", function(e){
          var t = e.target;
          if(t && t.name === "regions") renderLocations(true);
        });

        qs("#btnReset").addEventListener("click", function(){ 
          qs("#business_name").value = "";
          qs("#contact_first_name").value = "";
          qs("#contact_last_name").value = "";
          qs("#contact_email").value = "";
          qs("#contact_phone").value = "";
          qs("#website_url").value = "";
          qs("#whatsapp_url").value = "";
          qs("#image_1_url").value = "";
          qs("#image_2_url").value = "";
          qs("#image_3_url").value = "";
          qs("#short_description_es").value = "";
          qs("#short_description_en").value = "";
          reset();
          renderRegions(false);
          renderExperiences(false);
        });

        qs("#btnSubmit").addEventListener("click", submit);
      }

      boot();
    })();
  </script>
</body>
</html>
