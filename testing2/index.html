<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact | Experience Ecuador</title>
  <meta name="description" content="Contact Experience Ecuador for trip planning questions, partnerships, and media requests. Share your details and we will route your message to the right place." />
  <link rel="canonical" href="https://experienceecuador.com/contact/" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Experience Ecuador" />
  <meta property="og:title" content="Contact | Experience Ecuador" />
  <meta property="og:description" content="Contact Experience Ecuador for trip planning questions, partnerships, and media requests. Share your details and we will route your message to the right place." />
  <meta property="og:url" content="https://experienceecuador.com/contact/" />
  <meta property="og:image" content="https://experienceecuador.com/assets/images/EE-OG-Image-1.jpg" />
  <meta property="og:image:secure_url" content="https://experienceecuador.com/assets/images/EE-OG-Image-1.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Experience Ecuador trip planning and curated travel inspiration" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Contact | Experience Ecuador" />
  <meta name="twitter:description" content="Contact Experience Ecuador for trip planning questions, partnerships, and media requests. Share your details and we will route your message to the right place." />
  <meta name="twitter:image" content="https://experienceecuador.com/assets/images/EE-OG-Image-1.jpg" />

  <!-- Favicons (root paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#034EA2">

  <!-- Global header/footer CSS (required) -->
  <link rel="stylesheet" href="/assets/css/header.css">
  <link rel="stylesheet" href="/assets/css/footer.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand-blue:#034EA2;
      --slate:#6E7B8B;
      --text:#1F1F1F;
      --bg:#f6f8fb;
      --card:#fff;
      --border:rgba(0,0,0,.06);
      --shadow:0 18px 55px rgba(3,78,162,.12);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    a{text-decoration:none;color:inherit}
    img{max-width:100%;display:block;user-select:none;-webkit-user-drag:none}

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:40px 18px;
    }

    h1{
      font-family:Montserrat,Inter,sans-serif;
      font-size:clamp(34px,4vw,54px);
      color:var(--brand-blue);
      margin:0 0 10px;
      letter-spacing:-0.03em;
    }

    p{
      color:var(--slate);
      line-height:1.65;
      max-width:75ch;
      margin:0;
      font-size:16.8px;
    }

    .lede{ margin-top:0; max-width:80ch; }

    .content-grid{
      display:grid;
      grid-template-columns:1.15fr 0.85fr;
      gap:22px;
      margin-top:22px;
      align-items:start;
    }

    .card{
      background:var(--card);
      padding:22px;
      border-radius:22px;
      box-shadow:var(--shadow);
      border:1px solid var(--border);
    }

    .card p{margin:0 0 14px}

    .info-item{
      margin-top:16px;
      padding:16px;
      border-radius:16px;
      background:rgba(3,78,162,.05);
      border:1px solid rgba(3,78,162,.12);
    }

    .label{
      font-weight:800;
      font-size:13px;
      margin-bottom:6px;
      color:#0f2f62;
      letter-spacing:.01em;
    }

    .partners-lines{
      display:flex;
      flex-direction:column;
      gap:8px;
      color:#162b55;
      font-weight:600;
      line-height:1.5;
      font-size:14.7px;
    }

    .partners-lines .muted{
      color:var(--slate);
      font-weight:600;
      font-size:13.8px;
      line-height:1.6;
    }

    .side-stack{
      display:flex;
      flex-direction:column;
      gap:16px;
    }

    .mini{
      background:#fff;
      padding:20px;
      border-radius:22px;
      box-shadow:var(--shadow);
      border:1px solid var(--border);
    }

    .mini h3{
      margin:0 0 10px;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.02em;
      font-size:16px;
      color:#0f2f62;
    }

    .mini p{
      margin:0;
      color:var(--slate);
      line-height:1.65;
      font-size:14.8px;
    }

    .link-list{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:12px;
    }

    .pill-link{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 12px;
      border-radius:16px;
      background:rgba(3,78,162,.05);
      border:1px solid rgba(3,78,162,.12);
      font-weight:800;
      color:#0f2f62;
    }

    .pill-link:hover{ background:rgba(3,78,162,.08); }

    .pill-link span{
      opacity:.9;
      font-weight:700;
      color:#162b55;
      font-size:13px;
    }

    .side-image{
      border-radius:22px;
      overflow:hidden;
      background:transparent;
      border:1px solid var(--border);
      box-shadow:0 18px 60px rgba(0,0,0,.14);
    }

    .side-image img{ width:100%; height:auto; display:block; }

    /* Copy icon button */
    .value{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .value a{
      text-decoration:underline;
      text-underline-offset:3px;
      font-size:15px;
      font-weight:600;
      color:#162b55;
    }

    .copy-icon-btn{
      width:36px;
      height:36px;
      border-radius:12px;
      border:1px solid rgba(3,78,162,.22);
      background:#fff;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:transform .12s ease, background .12s ease, border-color .12s ease;
      flex:0 0 auto;
    }
    .copy-icon-btn:hover{ background:rgba(3,78,162,.06); }
    .copy-icon-btn:active{ transform:scale(0.98); }
    .copy-icon-btn.copied{
      background:rgba(3,78,162,.10);
      border-color:rgba(3,78,162,.35);
    }

    .copy-ico{
      width:18px;
      height:18px;
      fill:none;
      stroke:#0f2f62;
      stroke-width:2;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

    .copy-toast{
      display:none;
      margin-top:10px;
      width:fit-content;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(3,78,162,.08);
      border:1px solid rgba(3,78,162,.18);
      color:#0f2f62;
      font-weight:800;
      font-size:13px;
    }
    .copy-toast.show{ display:inline-flex; }

    /* ===== FORM ===== */
    .formWrap{
      margin-top:18px;
      padding-top:16px;
      border-top:1px solid rgba(0,0,0,.06);
    }

    .formTitle{
      margin:0 0 10px;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.02em;
      font-size:16px;
      color:#0f2f62;
    }

    .formNote{
      margin:0 0 14px;
      color:var(--slate);
      font-size:14.6px;
      line-height:1.6;
      max-width:none;
    }

    form{ margin:0; }

    .grid2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }

    .field{ display:flex; flex-direction:column; gap:7px; margin-top:12px; }
    .grid2 .field{ margin-top:0; }

    .field label{
      font-weight:800;
      font-size:13px;
      color:#0f2f62;
      letter-spacing:.01em;
    }

    .help{
      margin-top:2px;
      color:var(--slate);
      font-size:13.2px;
      line-height:1.45;
      font-weight:600;
    }

    .input, .select, .textarea{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(3,78,162,.18);
      background:#fff;
      padding:12px 12px;
      font-size:15px;
      font-weight:600;
      color:#162b55;
      outline:none;
      box-shadow:0 10px 26px rgba(3,78,162,.06);
      font-family:inherit;
    }

    .select{
      appearance:none;
      background-image:
        linear-gradient(45deg, transparent 50%, #0f2f62 50%),
        linear-gradient(135deg, #0f2f62 50%, transparent 50%),
        linear-gradient(to right, transparent, transparent);
      background-position:
        calc(100% - 18px) 50%,
        calc(100% - 13px) 50%,
        0 0;
      background-size:
        6px 6px,
        6px 6px,
        100% 100%;
      background-repeat:no-repeat;
      padding-right:40px;
    }

    .textarea{
      min-height:110px;
      resize:vertical;
    }

    .req{ color:#b42318; font-weight:900; }

    .actionsRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
      align-items:center;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding:12px 14px;
      border-radius:14px;
      font-weight:900;
      font-size:14px;
      border:1px solid transparent;
      cursor:pointer;
      transition:transform .15s ease, filter .15s ease, box-shadow .15s ease;
      user-select:none;
      font-family:inherit;
    }

    .btnPrimary{
      background:var(--brand-blue);
      color:#fff;
      box-shadow:0 18px 40px rgba(3,78,162,0.18);
    }
    .btnPrimary:hover{filter:brightness(.97); transform:translateY(-1px)}

    .btnGhost{
      background:#fff;
      color:#0f2f62;
      border-color:rgba(3,78,162,0.22);
      box-shadow:0 12px 26px rgba(3,78,162,0.08);
    }
    .btnGhost:hover{transform:translateY(-1px)}

    .statusPill{
      display:none;
      margin-top:14px;
      width:fit-content;
      padding:9px 12px;
      border-radius:999px;
      font-weight:900;
      font-size:13px;
      border:1px solid rgba(3,78,162,.18);
      background:rgba(3,78,162,.06);
      color:#0f2f62;
    }
    .statusPill.show{ display:inline-flex; }

    /* Phone field group */
    .phoneRow{
      display:grid;
      grid-template-columns:46px 90px 1fr;
      gap:10px;
      align-items:stretch;
    }

    .plusBox{
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:14px;
      border:1px solid rgba(3,78,162,.18);
      background:#fff;
      box-shadow:0 10px 26px rgba(3,78,162,.06);
      font-weight:900;
      font-size:16px;
      color:#162b55;
      user-select:none;
    }

    .ccOnly{ text-align:left; }
    .numInput{ width:100%; }

    /* Hidden iframe to avoid showing Google Apps Script page */
    .hiddenFrame{
      position:absolute;
      width:0;
      height:0;
      border:0;
      overflow:hidden;
      clip:rect(0 0 0 0);
      white-space:nowrap;
      clip-path:inset(50%);
    }

    @media(max-width:980px){
      .content-grid{grid-template-columns:1fr}
      .grid2{grid-template-columns:1fr}
    }
  </style>
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>

<body>
  <div id="siteHeader"></div>

  <main class="wrap">
    <h1>Contact</h1>
    <p class="lede">
      Want to collaborate, feature an experience, or be part of our future newsletter and regional guides?
      Share a short note and we will route it to the right place.
    </p>

    <section class="content-grid" aria-label="Contact content">
      <div class="card">
        <p>
          Experience Ecuador is a curated travel hub built to make planning feel simple, clear, and inspiring.
          If you represent a lodge, restaurant, tour operator, retreat, guide, or local business, we would love to hear from you.
        </p>

        <div class="info-item">
          <div class="label">Partnership Interests</div>
          <div class="partners-lines" aria-label="Partnership interests list">
            <div><strong>Lodging</strong> • Boutique Hotels, Eco-Lodges, Haciendas, Retreats</div>
            <div><strong>Experiences</strong> • Tours, Excursions, Guides, Adventure Operators</div>
            <div><strong>Food</strong> • Restaurants, Culinary Experiences, Coffee and Cacao</div>
            <div class="muted">
              Include your location, website, and the best contact person. If you have photos or a media kit, add a link.
            </div>
          </div>
        </div>

        <div class="formWrap" aria-label="Contact form">
          <h2 class="formTitle">Send A Note</h2>
          <p class="formNote">
            For trip questions or partnerships, this form goes directly to our team.<br>
            Fields marked <span class="req">*</span> are required.
          </p>

          <!-- UPDATED: add data-ga="contact_form" + id="contactForm" (required for GA4 event tracking) -->
          <form
            data-ga="contact_form"
            id="eeContactForm"
           
            target="ee_hidden_iframe"
            data-action="https://script.google.com/macros/s/AKfycbwkEieBoxiVmuSVQi-KXrMOtt875Rwx_bdOgEHI4kWcI-w5IUGeKSiH5BmxZbVmA5Qj/exec"
           method="POST" target="eeHiddenFrame" action="https://script.google.com/macros/s/AKfycbwkEieBoxiVmuSVQi-KXrMOtt875Rwx_bdOgEHI4kWcI-w5IUGeKSiH5BmxZbVmA5Qj/exec">
                <input type="hidden" name="user_agent" value="">
<input type="hidden" name="source" value="EE Contact">
<input type="hidden" name="status" value="New">
            <input type="hidden" name="language" value="en">

            <!-- WhatsApp-compatible E.164-ish: +<countrycode><digits> -->
            <input type="hidden" id="phone_full" name="phone" value="" autocapitalize="none" autocomplete="tel">

            <div class="grid2">
              <div class="field">
                <label for="first_name">First Name <span class="req">*</span></label>
                <input class="input" id="first_name" name="first_name" type="text" autocomplete="given-name" required autocapitalize="words">
              </div>

              <div class="field">
                <label for="last_name">Last Name <span class="req">*</span></label>
                <input class="input" id="last_name" name="last_name" type="text" autocomplete="family-name" required autocapitalize="words">
              </div>
            </div>

            <div class="field">
              <label for="email">Email <span class="req">*</span></label>
              <input class="input" id="email" name="email" type="email" autocomplete="email" required autocapitalize="none">
            </div>

            <div class="field">
              <label>Phone Number</label>
              <div class="help">Include country code (we store it with + for WhatsApp compatibility).</div>

              <div class="phoneRow" style="margin-top:8px;">
                <div class="plusBox" aria-hidden="true">+</div>
                <input class="input ccOnly" id="phone_cc" type="text" inputmode="numeric" autocomplete="tel-country-code" aria-label="Country code">
                <input class="input numInput" id="phone_num" type="text" inputmode="tel" autocomplete="tel-national" aria-label="Phone number">
              </div>
            </div>

            <div class="field">
              <label for="interests">Interests <span class="req">*</span></label>
              <select class="select" id="interests" name="interests" required>
                <option value="" selected disabled>Select an option</option>
                <option>Trip Planning</option>
                <option>Exploring</option>
                <option>Partnerships</option>
                <option>Media</option>
                <option>Other</option>
              </select>
            </div>

            <div class="field">
              <label for="notes">Notes</label>
              <textarea class="textarea" id="notes" name="notes" placeholder="Share a quick message, plus any links (website, media kit, itinerary ideas, etc.)" autocapitalize="sentences"></textarea>
            </div>

            <div class="field">
              <label for="how_did_you_hear_about_us">How Did You Hear About Us <span class="req">*</span></label>
              <select class="select" id="how_did_you_hear_about_us" name="how_did_you_hear_about_us" required>
                <option value="" selected disabled>Select an option</option>
                <option>Google</option>
                <option>Social Media</option>
                <option>Friend / Referral</option>
                <option>Newsletter</option>
                <option>Partner</option>
                <option>Other</option>
              </select>
            </div>

            <div class="actionsRow">
              <button class="btn btnPrimary" type="submit">Submit</button>
              <button class="btn btnGhost" type="reset">Reset</button>
            </div>

            <div class="statusPill" id="formStatusPill" role="status" aria-live="polite"></div>
          
  <div class="ee-turnstile" style="margin-top:14px">
    <div class="cf-turnstile" data-sitekey="0x4AAAAAACb5DEUS0cegxQwi" data-theme="light"></div>
    <p class="ee-turnstile-note" style="margin:8px 0 0;font-size:12px;opacity:0.8">
      This helps protect our inbox from spam.
    </p>
  </div>


  <div id="eeFormStatus" role="status" aria-live="polite" style="margin-top:14px"></div>

</form>

          <iframe class="hiddenFrame" name="ee_hidden_iframe" title="Hidden submission frame"></iframe>
        </div>
      </div>

      <aside class="side-stack" aria-label="Contact side content">
        <div class="mini">
          <h3>Reach Us</h3>
          <p>Send partnerships, features, and collaboration inquiries here.</p>

          <div class="link-list" aria-label="Email">
            <div class="value">
              <a class="email-link" href="mailto:info@experienceecuador.com">info@experienceecuador.com</a>
              <button class="copy-icon-btn" id="copyContactEmail" type="button" aria-label="Copy email">
                <svg class="copy-ico" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M9 9a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V9z"></path>
                  <path d="M7 15H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>
            </div>

            <div class="copy-toast" id="contactCopyToast" role="status" aria-live="polite">Copied</div>
          </div>
        </div>

        <div class="mini">
          <h3>Related Pages</h3>
          <p>Helpful links for policies and site details.</p>

          <div class="link-list" aria-label="Related pages">
            <a class="pill-link" href="/faqs/">FAQs <span>Common Questions</span></a>
            <a class="pill-link" href="/privacy-policy/">Privacy Policy <span>How We Handle Data</span></a>
            <a class="pill-link" href="/terms/">Terms &amp; Conditions <span>General Terms</span></a>
            <a class="pill-link" href="/terms-of-service/">Terms of Service <span>Service Rules</span></a>
          </div>
        </div>

        <div class="side-image" aria-label="Contact image">
          <img src="/assets/images/pages/EE-Assets-72-Contact.jpg" alt="Ecuador travel collage">
        </div>
      </aside>
    </section>
  </main>

  <iframe name="eeHiddenFrame" id="eeHiddenFrame" style="display:none" title="hidden"></iframe>


  <div id="siteFooter"></div>

  <script>
    // Light deterrent: disable right-click on images only
    document.addEventListener("contextmenu", (e) => {
      if (e.target && e.target.tagName === "IMG") e.preventDefault();
    });

    // Copy email icon button
    (function () {
  "use strict";

  var form = document.getElementById("eeContactForm");
  var submitBtn = document.getElementById("submitBtn");
  var statusEl = document.getElementById("status");
  var languageEl = document.getElementById("language");
  var sourceEl = document.getElementById("source");
  var uaEl = document.getElementById("user_agent");
  var ipEl = document.getElementById("ip_best-effort");

  var verifyEndpoint = "https://experienceecuador.com/api/turnstile-verify";

  function setStatus(kind, msg) {
    if (!statusEl) return;
    statusEl.className = "status " + (kind || "");
    statusEl.textContent = msg || "";
    statusEl.style.display = msg ? "block" : "none";
  }

  function disableSubmit(disabled) {
    if (!submitBtn) return;
    submitBtn.disabled = !!disabled;
    submitBtn.setAttribute("aria-disabled", disabled ? "true" : "false");
  }

  function inferLanguageFromPath() {
    try {
      var p = (window.location && window.location.pathname) ? window.location.pathname.toLowerCase() : "";
      if (p.indexOf("/es/") !== -1 || p.endsWith("/es") || p.indexOf("lang=es") !== -1) return "es";
    } catch (e) {}
    return "en";
  }

  function getTurnstileToken() {
    var el = form ? form.querySelector('input[name="cf-turnstile-response"]') : null;
    return el ? String(el.value || "").trim() : "";
  }

  async function verifyTurnstile(token) {
    var res = await fetch(verifyEndpoint, {
      method: "POST",
      headers: { "Content-Type": "application/json", "Accept": "application/json" },
      body: JSON.stringify({
        token: token,
        action: "ee_contact",
        language: languageEl ? languageEl.value : "en",
        source: sourceEl ? sourceEl.value : "EE Contact",
        user_agent: navigator.userAgent || ""
      })
    });

    var data = {};
    try { data = await res.json(); } catch (e) {}
    if (!res.ok || !data || data.ok !== true) {
      var msg = (data && (data.message || data.error)) ? (data.message || data.error) : ("Turnstile verification failed (" + res.status + ")");
      throw new Error(msg);
    }
    return data;
  }

  async function onSubmit(ev) {
    ev.preventDefault();
    setStatus("", "");
    disableSubmit(true);

    try {
      if (languageEl) languageEl.value = inferLanguageFromPath();
      if (sourceEl && !sourceEl.value) sourceEl.value = "EE Contact";
      if (uaEl) uaEl.value = navigator.userAgent || "";

      var token = getTurnstileToken();
      if (!token) {
        setStatus("error", "Please complete the spam protection check, then submit again.");
        disableSubmit(false);
        return;
      }

      await verifyTurnstile(token);

      setStatus("success", (languageEl && languageEl.value === "es")
        ? "Enviado. Recibimos tu mensaje y te responderemos pronto."
        : "Submitted. We received your message and will get back to you soon."
      );

      // Submit as a standard POST (no fetch) so we avoid cross-origin redirect/CORS issues.
      // The form posts into a hidden iframe so the page does not refresh and the form is not cleared.
      if (form) form.submit();

      // Keep button disabled briefly to prevent double submits, then re-enable.
      window.setTimeout(function () { disableSubmit(false); }, 3000);

    } catch (err) {
      var msg = (err && err.message) ? err.message : "Submission failed.";
      setStatus("error", "Submission failed. " + msg);
      disableSubmit(false);

      // If the Turnstile API exists, reset so user can try again.
      try {
        if (window.turnstile && typeof window.turnstile.reset === "function") {
          var widget = document.querySelector(".cf-turnstile");
          if (widget) window.turnstile.reset(widget);
          else window.turnstile.reset();
        }
      } catch (e) {}
    }
  }

  if (form) form.addEventListener("submit", onSubmit);
})();

    // Phone UX:
    // - Country code field (digits only, no + typed)
    // - Number field (digits, spaces, dashes allowed)
    // - Stored value becomes +<countrycode><digits> (E.164-ish) in hidden input "phone"
    (function () {
      var cc = document.getElementById("phone_cc");
      var num = document.getElementById("phone_num");
      var full = document.getElementById("phone_full");
      if (!cc || !num || !full) return;

      // Default to US if user leaves it blank (remove if you want no default)
      cc.value = cc.value || "1";

      function digitsOnly(v) {
        return String(v || "").replace(/\D/g, "");
      }

      function formatNationalBasic(v) {
        var d = digitsOnly(v);
        if (!d) return "";
        if (d.length <= 3) return d;
        if (d.length <= 6) return d.slice(0, 3) + "-" + d.slice(3);
        return (
          d.slice(0, 3) +
          "-" +
          d.slice(3, 6) +
          "-" +
          d.slice(6, 10) +
          (d.length > 10 ? " " + d.slice(10) : "")
        );
      }

      function updateFull() {
        var ccd = digitsOnly(cc.value);
        var nd = digitsOnly(num.value);
        if (!ccd && !nd) {
          full.value = "";
          return;
        }
        if (!nd) {
          full.value = ccd ? "+" + ccd : "";
          return;
        }
        full.value = (ccd ? "+" + ccd : "+") + nd;
      }

      cc.addEventListener("input", function () {
        cc.value = digitsOnly(cc.value).slice(0, 4);
        updateFull();
      });

      num.addEventListener("input", function () {
        num.value = formatNationalBasic(num.value);
        updateFull();
      });

      cc.addEventListener("blur", updateFull);
      num.addEventListener("blur", updateFull);

      updateFull();
    })();

    // Submitted confirmation (without leaving the page):
    // We submit to Apps Script in a hidden iframe, then show a confirmation message immediately.
    (function () {
      var form = document.getElementById("contactForm");
      var pill = document.getElementById("formStatusPill");
      if (!form || !pill) return;

      form.addEventListener("submit", function () {
        pill.textContent =
          "Submitted. We received your message and will get back to you soon.";
        pill.classList.add("show");

        setTimeout(function () {
          try { form.reset(); } catch (e) {}

          var cc = document.getElementById("phone_cc");
          if (cc && !cc.value) cc.value = "1";

          var full = document.getElementById("phone_full");
          if (full) full.value = "";
        }, 450);
      });
    })();
  </script>

  <!-- Keep global mobile nav behavior + GA4 + events -->
  <script src="/assets/js/site.js"></script>

  <!-- Global header/footer injection -->
  <script>
    (function () {
      async function inject(id, url) {
        var el = document.getElementById(id);
        if (!el) return;
        var res = await fetch(url, { cache: "no-store" });
        el.innerHTML = await res.text();
      }
      inject("siteHeader", "/assets/includes/header.html");
      inject("siteFooter", "/assets/includes/footer.html");
    })();
  </script>

<script>
/* EE_CONTACT_AJAX_SUBMIT_v1 */
(function() {
  var form = document.getElementById("eeContactForm");
  if (!form) return;

  var statusEl = document.getElementById("eeFormStatus");
  var submitBtn = form.querySelector('button[type="submit"], input[type="submit"]');
  var endpoint = form.getAttribute("data-action") || "https://script.google.com/macros/s/AKfycbwkEieBoxiVmuSVQi-KXrMOtt875Rwx_bdOgEHI4kWcI-w5IUGeKSiH5BmxZbVmA5Qj/exec";

  function setStatus(kind, msg) {
    if (!statusEl) return;
    var bg = kind === "success" ? "rgba(34,197,94,0.12)" : kind === "error" ? "rgba(239,68,68,0.12)" : "rgba(59,130,246,0.12)";
    var border = kind === "success" ? "rgba(34,197,94,0.35)" : kind === "error" ? "rgba(239,68,68,0.35)" : "rgba(59,130,246,0.35)";
    statusEl.innerHTML =
      '<div style="padding:14px 14px;border-radius:14px;border:1px solid ' + border + ';background:' + bg + ';font-weight:700">' +
        msg +
      '</div>';
  }

  function getLang() {
    var langField = form.querySelector('input[name="language"]');
    var docLang = (document.documentElement.getAttribute("lang") || "en").toLowerCase();
    var lang = (langField && langField.value ? langField.value : docLang);
    return (lang.indexOf("es") === 0) ? "es" : "en";
  }

  function serializeForm() {
    var fd = new FormData(form);
    var obj = {};
    fd.forEach(function(v, k) {
      if (obj[k] !== undefined) return;
      obj[k] = String(v || "").trim();
    });
    obj.user_agent = navigator.userAgent || obj.user_agent || "";
    obj.source = obj.source || "EE Contact";
    obj.language = obj.language || getLang();
    return obj;
  }

  form.addEventListener("submit", function(ev) {
    ev.preventDefault();

    // Turnstile token
    var tsInput = form.querySelector('input[name="cf-turnstile-response"]');
    var tsToken = tsInput ? (tsInput.value || "").trim() : "";

    if (!tsToken) {
      setStatus("error", getLang() === "es" ? "Por favor completa la verificacion anti-spam antes de enviar." : "Please complete the anti-spam verification before submitting.");
      return;
    }

    var payload = serializeForm();
    payload.turnstile_token = tsToken;

    if (submitBtn) {
      submitBtn.disabled = true;
      submitBtn.setAttribute("aria-disabled", "true");
    }
    setStatus("info", getLang() === "es" ? "Enviando..." : "Submitting...");

    fetch(endpoint, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Accept": "application/json"
      },
      body: JSON.stringify(payload)
    }).then(function(res) {
      return res.json();
    }).then(function(data) {
      if (data && data.ok) {
        setStatus("success", getLang() === "es"
          ? "Enviado. Hemos recibido tu mensaje y te responderemos pronto."
          : "Submitted. We received your message and will get back to you soon."
        );
        // Do NOT clear the form (per your requirement).
      } else {
        var err = (data && (data.email_error || data.message)) ? (data.email_error || data.message) : "Unknown error";
        setStatus("error", (getLang()==="es" ? "No se pudo enviar. " : "Submission failed. ") + err);
      }
    }).catch(function(err) {
      setStatus("error", (getLang()==="es" ? "No se pudo enviar. " : "Submission failed. ") + String(err || ""));
    }).finally(function() {
      if (submitBtn) {
        submitBtn.disabled = false;
        submitBtn.removeAttribute("aria-disabled");
      }
      // Reset Turnstile so user can resubmit if needed
      try {
        if (window.turnstile && form.querySelector(".cf-turnstile")) window.turnstile.reset(form.querySelector(".cf-turnstile"));
      } catch (e) {}
    });
  });
})();
</script>

</body>
</html>
