<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Header Test | Experience Ecuador</title>

  <!-- Fonts (match your site) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Shared Header CSS -->
  <link rel="stylesheet" href="/assets/css/header.css">

  <style>
    /* =========================
       HEADER FIXES (TEST PAGE)
       ========================= */

    /* 1) Force NO underlines anywhere in header (desktop + mobile) */
    .topbar a,
    .topbar a:visited,
    .topbar a:hover,
    .topbar a:active,
    .topbar .nav a,
    .topbar .nav button,
    .topbar .dropbtn{
      text-decoration: none !important;
      -webkit-text-decoration: none !important;
    }

    /* 2) MOBILE: TRUE full-width + evenly spread rows */
    @media (max-width: 620px){

      /* Make the sticky header containers truly full width (no max-width “center column” effect) */
      .topbar{
        width: 100% !important;
      }

      .topbar .topbar-inner{
        width: 100% !important;
        max-width: 100% !important;     /* critical */
        margin: 0 !important;           /* critical */
        padding-left: 12px !important;  /* small, consistent gutter */
        padding-right: 12px !important; /* small, consistent gutter */
        align-items: stretch !important;
      }

      /* Brand centered */
      .topbar .brand{
        width: 100% !important;
        justify-content: center !important;
      }

      /* Nav fills full width */
      .topbar .nav{
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;

        display: grid !important;
        grid-template-columns: repeat(12, 1fr) !important;
        grid-auto-rows: auto;
        gap: 12px 0px !important; /* no column gap = mathematically even */
        align-items: center;
        justify-items: stretch;   /* each cell fills its column */
        white-space: normal;
      }

      /* Each top-level nav item MUST fill its grid cell */
      .topbar .nav > a,
      .topbar .nav > .dropdown{
        width: 100% !important;
        margin: 0 !important;
        justify-self: stretch !important;
      }

      /* Force dropdown wrapper + button to behave like a full-width cell */
      .topbar .nav > .dropdown{
        display: block !important;
      }
      .topbar .nav > .dropdown .dropbtn{
        width: 100% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 10px 8px !important;
        line-height: 1 !important;
        white-space: nowrap !important;
      }

      /* Links/buttons centered INSIDE each cell */
      .topbar .nav a,
      .topbar .nav button{
        width: 100% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 10px 8px !important;
        border-radius: 10px;
        line-height: 1 !important;
        white-space: nowrap !important; /* keeps Trip Builder on one line */
      }

      /* --- Slot layout (Top row 4 x 3 cols, Bottom row 3 x 4 cols) --- */
      .topbar .nav > [data-slot="home"]{ grid-column: 1 / 4;  grid-row: 1; }
      .topbar .nav > [data-slot="about"]{ grid-column: 4 / 7;  grid-row: 1; }
      .topbar .nav > [data-slot="mission"]{ grid-column: 7 / 10; grid-row: 1; }
      .topbar .nav > [data-slot="contact"]{ grid-column: 10 / 13; grid-row: 1; }

      .topbar .nav > [data-slot="regions"]{ grid-column: 1 / 5;  grid-row: 2; }
      .topbar .nav > [data-slot="experiences"]{ grid-column: 5 / 9; grid-row: 2; }
      .topbar .nav > [data-slot="trip"]{ grid-column: 9 / 13; grid-row: 2; }

      /* Keep dropdown menus inside viewport on mobile */
      .topbar .dropdown-menu{
        left: 50% !important;
        right: auto !important;
        transform: translateX(-50%) !important;
        width: min(340px, calc(100vw - 24px)) !important;
        max-height: 55vh;
        overflow: auto;
      }
    }

    /* =========================
       PAGE STYLING (TEST PAGE)
       ========================= */
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#f6f8fb;
      color:#1F1F1F;
    }
    main{
      max-width:1100px;
      margin:0 auto;
      padding:40px 18px 120px;
    }
    .card{
      background:#fff;
      border-radius:22px;
      border:1px solid rgba(0,0,0,.06);
      box-shadow:0 18px 55px rgba(3,78,162,.12);
      padding:22px;
    }
    h1{
      margin:0 0 10px;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.03em;
      color:#034EA2;
      font-size:clamp(28px,4vw,48px);
    }
    p{ margin:0; line-height:1.7; color:#1f2b3f; }
  </style>
</head>

<body>
  <!-- Shared header mount -->
  <div id="siteHeader"></div>

  <main>
    <div class="card">
      <h1>Header Test Page</h1>
      <p>
        Use this page to test desktop spacing, mobile two-row layout, and dropdown behavior.
        Check that Trip Builder stays on one line and dropdown menus stay inside the viewport.
      </p>
    </div>
  </main>

  <!-- Shared header loader -->
  <script>
    (async function(){
      const mount = document.getElementById('siteHeader');
      if(!mount) return;

      const res = await fetch('/assets/includes/header.html', { cache: 'no-store' });
      mount.innerHTML = await res.text();

      // Apply slots so the mobile grid can lock items into exact cells
      function applyNavSlots(){
        const nav = document.querySelector('.topbar .nav');
        if(!nav) return;

        const children = Array.from(nav.children);

        children.forEach(el => {
          if (el.hasAttribute('data-slot')) el.removeAttribute('data-slot');

          if (el.tagName === 'A') {
            const t = (el.textContent || '').trim().toLowerCase();
            if (t === 'home') el.setAttribute('data-slot','home');
            else if (t === 'about') el.setAttribute('data-slot','about');
            else if (t === 'mission') el.setAttribute('data-slot','mission');
            else if (t === 'contact') el.setAttribute('data-slot','contact');
            else if (t === 'trip builder') el.setAttribute('data-slot','trip');
            return;
          }

          if (el.classList && el.classList.contains('dropdown')) {
            const btn = el.querySelector('.dropbtn');
            const bt = btn ? (btn.textContent || '').trim().toLowerCase() : '';
            if (bt.includes('regions')) el.setAttribute('data-slot','regions');
            else if (bt.includes('experiences')) el.setAttribute('data-slot','experiences');
          }
        });
      }

      applyNavSlots();

      // Load shared dropdown JS AFTER injection
      const s = document.createElement('script');
      s.src = '/assets/js/header.js';
      s.defer = true;
      document.body.appendChild(s);
    })();
  </script>
</body>
</html>
