<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Culinary | Experience Ecuador</title>
  <meta name="description" content="Explore Ecuador through food with markets, seafood, cacao, and coffee. Pick a culinary focus and start with the best region to build your itinerary." />

  <!-- Canonical (must match page URL) -->
  <link rel="canonical" href="https://experienceecuador.com/experiences/culinary/" />

  <!-- Open Graph (use the same OG image site-wide) -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Experience Ecuador" />
  <meta property="og:title" content="Culinary | Experience Ecuador" />
  <meta property="og:description" content="Explore Ecuador through food with markets, seafood, cacao, and coffee. Pick a culinary focus and start with the best region to build your itinerary." />
  <meta property="og:url" content="https://experienceecuador.com/experiences/culinary/" />
  <meta property="og:image" content="https://experienceecuador.com/assets/images/EE-OG-Image-1.jpg" />
  <meta property="og:image:secure_url" content="https://experienceecuador.com/assets/images/EE-OG-Image-1.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Experience Ecuador travel inspiration cover image" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Culinary | Experience Ecuador" />
  <meta name="twitter:description" content="Explore Ecuador through food with markets, seafood, cacao, and coffee. Pick a culinary focus and start with the best region to build your itinerary." />
  <meta name="twitter:image" content="https://experienceecuador.com/assets/images/EE-OG-Image-1.jpg" />

  <!-- Favicons (root paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#034EA2">

  <!-- Global header/footer CSS -->
  <link rel="stylesheet" href="/assets/css/header.css">
  <link rel="stylesheet" href="/assets/css/footer.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand-blue:#034EA2;
      --charcoal:#1F1F1F;
      --slate:#6E7B8B;

      --card:#ffffff;
      --border:rgba(0,0,0,0.06);
      --shadow:0 18px 55px rgba(3,78,162,0.12);

      --chipBg: rgba(3,78,162,0.10);
      --chipText:#0f2f62;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--charcoal);
      background:#f6f8fb;
    }

    a{text-decoration:none;color:inherit}
    img{max-width:100%;display:block}

    /* ===== HERO (GALAPAGOS PATTERN) ===== */
    .hero{
      position:relative;
      width:100%;
      min-height:64vh;
      display:flex;
      align-items:flex-end;
      justify-content:center;
      background:url("/assets/images/EE-Experiences-Culinary-01.jpg") center / cover no-repeat;
      color:#fff;
    }

    .hero::before{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(to bottom, rgba(0,0,0,0.15), rgba(0,0,0,0.70));
    }

    .hero-inner{
      position:relative;
      z-index:2;
      width:100%;
      max-width:1100px;
      padding:54px 18px 34px;
      text-align:left;
    }

    .kicker{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(3,78,162,0.38);
      border:1px solid rgba(255,255,255,0.22);
      font-weight:700;
      letter-spacing:0.02em;
      font-size:12.5px;
      margin-bottom:14px;
      backdrop-filter:blur(10px);
    }

    .hero h1{
      margin:0 0 10px;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.03em;
      font-size:clamp(40px,5.4vw,72px);
      line-height:1.03;
    }

    .hero p{
      margin:0;
      max-width:68ch;
      font-size:clamp(15px,2vw,18px);
      line-height:1.65;
      color:rgba(255,255,255,0.92);
    }

    /* ===== CONTENT ===== */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:36px 18px 60px;
    }

    .section{margin-bottom:36px}

    .section h2{
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      font-size:24px;
      margin:0 0 10px;
      color:var(--brand-blue);
    }

    .section p{
      max-width:85ch;
      line-height:1.75;
      font-size:15.8px;
      color:#2a2f36;
      margin:0;
    }

    .grid{
      display:grid;
      grid-template-columns:1.15fr 0.85fr;
      gap:28px;
      margin-top:18px;
      align-items:start;
    }

    .card{
      background:#fff;
      border-radius:22px;
      padding:22px;
      border:1px solid rgba(0,0,0,0.06);
      box-shadow:var(--shadow);
    }

    .card ul{
      margin:0;
      padding-left:18px;
      line-height:1.75;
      font-size:14.8px;
      color:#24324a;
    }

    .mini{
      background:linear-gradient(180deg, rgba(3,78,162,0.06), rgba(3,78,162,0.02));
      border-radius:20px;
      padding:20px;
      border:1px solid rgba(3,78,162,0.12);
    }

    .mini + .mini{margin-top:16px}

    /* ===== CULINARY SELECTOR (TEMPLATE READY) ===== */
    .selector{
      background:#fff;
      border:1px solid var(--border);
      border-radius:24px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    .selector-top{
      display:grid;
      grid-template-columns:1fr auto;
      gap:16px;
      padding:22px;
      border-bottom:1px solid rgba(0,0,0,0.06);
      background:linear-gradient(180deg, rgba(3,78,162,0.06), rgba(3,78,162,0.02));
      align-items:start;
    }

    .selector-copy{
      grid-column:1 / -1;
      grid-row:2;
    }

    .selector-copy h3{
      margin:0 0 6px;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.02em;
      font-size:20px;
      color:#0f2f62;
    }

    .selector-copy p{
      margin:0;
      color:#24324a;
      opacity:0.92;
      line-height:1.65;
      font-size:14.8px;
      max-width:70ch;
    }

    .selector-controls{
      grid-column:2;
      grid-row:1;
      justify-self:end;

      display:grid;
      grid-template-columns:auto 260px;
      gap:10px 10px;
      align-items:center;
    }

    .selector-controls label{
      font-weight:800;
      color:#0f2f62;
      font-size:13px;
      letter-spacing:0.02em;
    }

    .selector-controls select{
      appearance:none;
      -webkit-appearance:none;
      -moz-appearance:none;
      border:1px solid rgba(3,78,162,0.22);
      background:#fff;
      color:#0f2f62;
      font-weight:700;
      padding:11px 42px 11px 12px;
      border-radius:14px;
      font-size:14px;
      cursor:pointer;
      outline:none;
      min-width:0;
      width:260px;
      box-shadow:0 14px 30px rgba(3,78,162,0.10);
      background-image:
        linear-gradient(45deg, transparent 50%, #0f2f62 50%),
        linear-gradient(135deg, #0f2f62 50%, transparent 50%),
        linear-gradient(to right, transparent, transparent);
      background-position:
        calc(100% - 18px) 50%,
        calc(100% - 12px) 50%,
        0 0;
      background-size:6px 6px, 6px 6px, 100% 100%;
      background-repeat:no-repeat;
    }

    .selector-controls select:focus{
      box-shadow:0 0 0 4px rgba(3,78,162,0.16);
      border-color:rgba(3,78,162,0.45);
    }

    .selector-body{ padding:22px; }

    .recs-grid{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:16px;
    }

    .rec{
      background:#fff;
      border:1px solid rgba(0,0,0,0.06);
      border-radius:18px;
      padding:16px;
      box-shadow:0 16px 45px rgba(0,0,0,0.08);
      transition:transform .2s ease, box-shadow .2s ease;
      min-height:182px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .rec:hover{
      transform:translateY(-5px);
      box-shadow:0 24px 60px rgba(0,0,0,0.12);
    }

    .rec h4{
      margin:0;
      font-family:Montserrat,Inter,sans-serif;
      font-weight:800;
      letter-spacing:-0.02em;
      font-size:16px;
      color:#0f2f62;
    }

    .rec p{
      margin:0;
      color:#2a2f36;
      line-height:1.6;
      font-size:14px;
      opacity:0.95;
      flex:1;
    }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      padding:8px 10px;
      border-radius:999px;
      background:var(--chipBg);
      color:var(--chipText);
      font-weight:800;
      font-size:12.5px;
      letter-spacing:0.01em;
      border:1px solid rgba(3,78,162,0.16);
      transition:transform .15s ease, background .15s ease;
    }

    .chip:hover{
      transform:translateY(-1px);
      background:rgba(3,78,162,0.14);
    }

    .meta{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:-2px;
    }

    .badge{
      font-size:12px;
      font-weight:800;
      color:#0f2f62;
      background:rgba(3,78,162,0.08);
      border:1px solid rgba(3,78,162,0.14);
      padding:6px 8px;
      border-radius:999px;
      line-height:1;
    }

    .rec-actions{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-top:4px;
    }

    .cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:10px 12px;
      border-radius:12px;
      font-weight:900;
      font-size:13px;
      background:var(--brand-blue);
      color:#fff;
      border:0;
      cursor:pointer;
      min-width:120px;
    }

    .cta:hover{ filter:brightness(0.95); }

    .hint{
      font-size:12.5px;
      color:#24324a;
      opacity:0.85;
      font-weight:700;
    }

    /* ===== CAROUSEL (GALLERY) ===== */
    .carousel{
      margin-top:40px;
      background:#fff;
      border-radius:22px;
      border:1px solid rgba(0,0,0,0.06);
      box-shadow:0 18px 55px rgba(3,78,162,0.10);
      overflow:hidden;
      position:relative;
      z-index:1;
    }

    .carousel-viewport{
      overflow:hidden;
      width:100%;
      touch-action:pan-y;
    }

    .carousel-track{
      display:flex;
      width:100%;
      transform:translateX(0);
      transition:transform 450ms ease;
      will-change:transform;
    }

    .carousel-slide{
      min-width:100%;
      position:relative;
      aspect-ratio:16/9;
      background:#eef2f7;
    }

    .carousel-slide img{
      width:100%;
      height:100%;
      object-fit:cover;
    }

    .carousel-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:44px;
      height:44px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.35);
      background:rgba(15,47,98,0.55);
      backdrop-filter:blur(10px);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:5;
    }

    .carousel-btn:hover{ background:rgba(15,47,98,0.70); }

    .carousel-btn.prev{ left:12px; }
    .carousel-btn.next{ right:12px; }

    .carousel-btn span{
      display:block;
      width:10px;
      height:10px;
      border-right:2px solid #fff;
      border-bottom:2px solid #fff;
      opacity:.95;
    }

    .carousel-btn.prev span{ transform:rotate(135deg); }
    .carousel-btn.next span{ transform:rotate(-45deg); }

    .carousel-ui{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 14px;
      border-top:1px solid rgba(0,0,0,0.06);
      background:linear-gradient(180deg, rgba(3,78,162,0.03), rgba(3,78,162,0.01));
    }

    .carousel-dots{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:center;
      flex:1;
    }

    .dot{
      width:10px;
      height:10px;
      border-radius:999px;
      border:1px solid rgba(3,78,162,0.25);
      background:rgba(3,78,162,0.12);
      cursor:pointer;
      padding:0;
    }

    .dot.active{
      background:rgba(3,78,162,0.85);
      border-color:rgba(3,78,162,0.85);
    }

    .carousel-counter{
      font-weight:700;
      font-size:13px;
      color:#0f2f62;
      opacity:.9;
      white-space:nowrap;
    }

    /* ===== MOBILE ===== */
    @media(max-width:900px){
      .grid{grid-template-columns:1fr}
      .recs-grid{grid-template-columns:1fr}
      .selector-top{display:flex; flex-direction:column; align-items:flex-start;}
      .selector-controls{display:flex; flex-wrap:wrap; justify-content:flex-start; width:100%;}
      .selector-controls select{min-width:0; width:100%;}
      .hero-inner{ text-align:center; }
      .hero p{ margin:0 auto; }
    }

    @media (prefers-reduced-motion: reduce){
      .rec { transition:none !important; }
      .carousel-track{ transition:none !important; }
    }
  </style>
</head>

<body>
  <div id="siteHeader"></div>

  <main>
    <!-- PAGE CONTENT ONLY -->

    <section class="hero" aria-label="Culinary hero image">
      <div class="hero-inner">
        <div class="kicker">Experience Guide</div>
        <h1>Culinary</h1>
        <p>Ecuador’s cuisine is deeply regional and rooted in culture. Taste the Coast, Andes, Amazon, and islands through markets, cacao, coffee, and slow meals.</p>
      </div>
    </section>

    <div class="wrap">
      <section class="section">
        <h2>What this experience is about</h2>
        <p>
          Culinary travel in Ecuador goes far beyond restaurants. It includes market visits, family-run kitchens, regional specialties,
          coffee and cacao culture, and meals that tell a story about where you are. This page will grow into curated food experiences,
          trusted spots, and region-based culinary highlights.
        </p>
      </section>

      <!-- Culinary Selector -->
      <section class="section selector" aria-label="Culinary selector">
        <div class="selector-top">
          <div class="selector-controls">
            <label for="ee_exp_nav">Experiences</label>
            <select id="ee_exp_nav" name="ee_exp_nav" aria-label="Navigate to an experience">
              <option value="/experiences">All Experiences</option>
              <option value="/experiences/adventure/">Adventure</option>
              <option value="/experiences/nature/">Nature</option>
              <option value="/experiences/wildlife-birding/">Wildlife &amp; Birding</option>
              <option value="/experiences/relaxation/">Relaxation</option>
              <option value="/experiences/culinary/" selected>Culinary</option>
              <option value="/experiences/culture/">Culture</option>
            </select>

            <label for="ee_cul_focus">Focus</label>
            <select id="ee_cul_focus" name="ee_cul_focus" aria-label="Select culinary focus">
              <option value="markets" selected>Markets + local classics</option>
              <option value="seafood">Seafood + ceviche culture</option>
              <option value="cacao">Cacao + chocolate experiences</option>
              <option value="coffee">Coffee culture + cafes</option>
            </select>
          </div>

          <div class="selector-copy">
            <h3>Pick your food focus</h3>
            <p>
              Choose what you want to taste and we’ll show three strong starting points plus the best region to build from.
              Keep it simple and let the meals do the travel planning.
            </p>
          </div>
        </div>

        <div class="selector-body">
          <div class="recs-grid" id="ee_cul_recs" aria-live="polite"></div>
          <div style="margin-top:12px;">
            <span class="hint" id="ee_cul_hint">Tip: Markets are the fastest way to understand a region’s food culture.</span>
          </div>
        </div>
      </section>

      <section class="section grid">
        <div>
          <div class="card">
            <h2>Signature culinary experiences</h2>
            <ul>
              <li>Coastal seafood and ceviche culture</li>
              <li>Highland markets and traditional dishes</li>
              <li>Amazon ingredients and indigenous food traditions</li>
              <li>Coffee, cacao, and chocolate experiences</li>
              <li>Local kitchens, bakeries, and family-run restaurants</li>
            </ul>
          </div>

          <div class="card" style="margin-top:16px;">
            <h2>Must Eats</h2>
            <p style="margin:0 0 12px; color:#24324a; line-height:1.7; font-size:14.8px;">
              Want the short list? Jump into our Must Eats page for the dishes, snacks, and local favorites worth planning around.
            </p>
            <a class="cta" href="/experiences/culinary/must-eats/">Explore Must Eats</a>
          </div>
        </div>

        <div>
          <div class="mini">
            <h2>Best for</h2>
            <ul>
              <li>Food-first travelers</li>
              <li>Cultural explorers</li>
              <li>Slow travelers and planners</li>
              <li>People who want to eat like locals</li>
            </ul>
          </div>

          <div class="mini">
            <h2>Good region matches</h2>
            <ul>
              <li>Coast: seafood, plantain-based dishes, fresh flavors</li>
              <li>Andes: markets, soups, grains, and comfort food</li>
              <li>Amazon: native ingredients and traditional preparation</li>
              <li>Galapagos: fresh fish and island dining</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Bottom Carousel -->
      <section class="carousel" aria-label="Culinary gallery carousel">
        <button class="carousel-btn prev" type="button" aria-label="Previous slide" id="ee_car_prev">
          <span aria-hidden="true"></span>
        </button>
        <button class="carousel-btn next" type="button" aria-label="Next slide" id="ee_car_next">
          <span aria-hidden="true"></span>
        </button>

        <div class="carousel-viewport" id="ee_car_viewport">
          <div class="carousel-track" id="ee_car_track">
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-1.jpg" alt="Culinary gallery image 1">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-2.jpg" alt="Culinary gallery image 2">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-3.jpg" alt="Culinary gallery image 3">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-4.jpg" alt="Culinary gallery image 4">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-5.jpg" alt="Culinary gallery image 5">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-6.jpg" alt="Culinary gallery image 6">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-7.jpg" alt="Culinary gallery image 7">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-8.jpg" alt="Culinary gallery image 8">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-9.jpg" alt="Culinary gallery image 9">
            </div>
            <div class="carousel-slide">
              <img src="/assets/images/EE-Carousel-Culinary-10.jpg" alt="Culinary gallery image 10">
            </div>
          </div>
        </div>

        <div class="carousel-ui">
          <div class="carousel-dots" id="ee_car_dots" aria-label="Carousel pagination"></div>
          <div class="carousel-counter" id="ee_car_counter">1 / 10</div>
        </div>
      </section>
    </div>
  </main>

  <div id="siteFooter"></div>

  <script src="/assets/js/site.js"></script>

  <script>
    (function(){
      async function inject(id, url){
        const el = document.getElementById(id);
        if(!el) return;
        const res = await fetch(url, { cache: "no-store" });
        el.innerHTML = await res.text();
      }
      inject("siteHeader", "/assets/includes/header.html");
      inject("siteFooter", "/assets/includes/footer.html");
    })();
  </script>

  <script>
    /* ===== Experiences dropdown (auto-navigate) ===== */
    (function(){
      const expEl = document.getElementById("ee_exp_nav");
      if (!expEl) return;
      expEl.addEventListener("change", function(){
        const url = this.value;
        if (url) window.location.href = url;
      });
    })();

    /* ===== Culinary Focus Selector (3 recommendations) ===== */
    (function(){
      const focusEl = document.getElementById("ee_cul_focus");
      const recsEl = document.getElementById("ee_cul_recs");
      const hintEl = document.getElementById("ee_cul_hint");

      const data = {
        markets: {
          hint: "Markets are the fastest way to understand a region’s food culture. Go early, snack slowly, and keep it simple.",
          recs: [
            { title:"Highland market morning", desc:"Browse stalls, try local snacks, then finish with a classic soup or hearty plate nearby.", badges:["Easy","Half day"], ctaLabel:"Explore Andes", ctaHref:"/regions/andes/" },
            { title:"Street food sampler", desc:"A calm walk with a few tasting stops. Perfect for first-timers who want local flavor fast.", badges:["Easy","2–4 hours"], ctaLabel:"Explore Andes", ctaHref:"/regions/andes/" },
            { title:"Traditional meal + bakery stop", desc:"Pair one signature dish with something sweet. Keep the day light and food-forward.", badges:["Easy","Flexible"], ctaLabel:"All Regions", ctaHref:"/regions/" }
          ]
        },
        seafood: {
          hint: "For seafood, stay coastal. Fresh ceviche and simple grilled fish are the move.",
          recs: [
            { title:"Ceviche culture lunch", desc:"Try one ceviche style, then add a second small plate if you’re hungry. Let freshness lead.", badges:["Easy","Coast"], ctaLabel:"Explore Coast", ctaHref:"/regions/coast/" },
            { title:"Seafood market + cooked-to-order plate", desc:"Walk the market, then choose a simple cooked dish nearby. Great for photographers too.", badges:["Easy","Half day"], ctaLabel:"Explore Coast", ctaHref:"/regions/coast/" },
            { title:"Sunset seafood dinner", desc:"A calm beach day, then dinner by the water at golden hour. Minimal planning, maximum reward.", badges:["Easy","Evening"], ctaLabel:"Explore Coast", ctaHref:"/regions/coast/" }
          ]
        },
        cacao: {
          hint: "Ecuador cacao is world-class. Keep it focused: tasting plus a light itinerary.",
          recs: [
            { title:"Cacao tasting and chocolate flight", desc:"Try multiple percentages and styles, then keep your afternoon simple so it stays enjoyable.", badges:["Easy","1–2 hours"], ctaLabel:"Explore Andes", ctaHref:"/regions/andes/" },
            { title:"Cacao experience + scenic rest day", desc:"Pair a cacao visit with downtime so you don’t turn it into a rushed checklist.", badges:["Easy","Full day"], ctaLabel:"Explore Andes", ctaHref:"/regions/andes/" },
            { title:"Amazon ingredients and story", desc:"A deeper cultural angle: native ingredients and traditional preparation with local context.", badges:["Moderate","Full day"], ctaLabel:"Explore Amazon", ctaHref:"/regions/amazon/" }
          ]
        },
        coffee: {
          hint: "Coffee days are best kept slow: one great cafe, one tasting, and plenty of downtime.",
          recs: [
            { title:"Cafe crawl (max 2 stops)", desc:"Pick one anchor cafe, then one second stop. Don’t overdo it. Keep it calm and intentional.", badges:["Easy","2–4 hours"], ctaLabel:"Explore Andes", ctaHref:"/regions/andes/" },
            { title:"Coffee tasting + pastry pairing", desc:"A simple tasting with a sweet bite. Great for friends and couples.", badges:["Easy","1–2 hours"], ctaLabel:"Explore Andes", ctaHref:"/regions/andes/" },
            { title:"Coastal alternative (coffee + warm pace)", desc:"If you want cafes with beach time, the Coast offers a slower, warmer rhythm.", badges:["Easy","Flexible"], ctaLabel:"Explore Coast", ctaHref:"/regions/coast/" }
          ]
        }
      };

      function escapeHtml(str){
        return String(str)
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;")
          .replaceAll("'","&#039;");
      }

      function render(key){
        const block = data[key] || data.markets;
        if (hintEl) hintEl.textContent = block.hint || "";

        const html = (block.recs || []).map((r) => {
          const badges = (r.badges || []).map(b => `<span class="badge">${escapeHtml(b)}</span>`).join("");
          return `
            <article class="rec">
              <div class="meta">${badges}</div>
              <h4>${escapeHtml(r.title)}</h4>
              <p>${escapeHtml(r.desc)}</p>

              <div class="rec-actions">
                <a class="cta" href="${escapeHtml(r.ctaHref)}">${escapeHtml(r.ctaLabel)}</a>
                <span class="hint">Best-fit starting point</span>
              </div>
            </article>
          `;
        }).join("");

        recsEl.innerHTML = html;
      }

      render(focusEl ? focusEl.value : "markets");

      if (focusEl) {
        focusEl.addEventListener("change", function(){
          render(this.value);
        });
      }
    })();

    /* ===== Carousel (same JS pattern) ===== */
    (function(){
      const track = document.getElementById("ee_car_track");
      const viewport = document.getElementById("ee_car_viewport");
      const prevBtn = document.getElementById("ee_car_prev");
      const nextBtn = document.getElementById("ee_car_next");
      const dotsWrap = document.getElementById("ee_car_dots");
      const counter = document.getElementById("ee_car_counter");

      if (!track || !viewport) return;

      const slides = Array.from(track.children);
      const total = slides.length;
      let index = 0;
      let startX = 0;
      let currentX = 0;
      let dragging = false;

      function setCounter(){
        if (!counter) return;
        counter.textContent = `${index + 1} / ${total}`;
      }

      function setDots(){
        if (!dotsWrap) return;
        dotsWrap.innerHTML = "";
        for (let i = 0; i < total; i++){
          const b = document.createElement("button");
          b.className = "dot" + (i === index ? " active" : "");
          b.type = "button";
          b.setAttribute("aria-label", `Go to slide ${i + 1}`);
          b.addEventListener("click", () => goTo(i));
          dotsWrap.appendChild(b);
        }
      }

      function update(){
        track.style.transform = `translateX(${-index * 100}%)`;
        setCounter();
        setDots();
        if (prevBtn) prevBtn.style.display = total > 1 ? "" : "none";
        if (nextBtn) nextBtn.style.display = total > 1 ? "" : "none";
      }

      function goTo(i){
        index = (i + total) % total;
        update();
      }

      function next(){ goTo(index + 1); }
      function prev(){ goTo(index - 1); }

      if (nextBtn) nextBtn.addEventListener("click", next);
      if (prevBtn) prevBtn.addEventListener("click", prev);

      viewport.addEventListener("touchstart", (e) => {
        if (total <= 1) return;
        if (e.touches.length !== 1) return;
        dragging = true;
        startX = e.touches[0].clientX;
        currentX = startX;
      }, { passive:true });

      viewport.addEventListener("touchmove", (e) => {
        if (!dragging || e.touches.length !== 1) return;
        currentX = e.touches[0].clientX;
      }, { passive:true });

      viewport.addEventListener("touchend", () => {
        if (!dragging) return;
        const dx = currentX - startX;
        dragging = false;
        if (Math.abs(dx) > 45){
          if (dx < 0) next();
          else prev();
        }
      });

      viewport.addEventListener("keydown", (e) => {
        if (total <= 1) return;
        if (e.key === "ArrowRight") next();
        if (e.key === "ArrowLeft") prev();
      });

      update();
    })();
  </script>

</body>
</html>
